{"version":3,"sources":["io/reconnecting-websocket.js","utils/game-state.js","reducers/index.js","utils/url.js","components/blank-state.jsx","theme/index.js","components/loading-indicator.jsx","components/grid.jsx","components/board.jsx","io/websocket.js","utils/inline-svg.js","utils/engine-client.js","components/avatar.jsx","components/scoreboard.jsx","components/mediaControls.jsx","components/logo.jsx","components/game.jsx","actions/index.js","containers/app.jsx","index.js"],"names":["__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","define","undefined","window","ReconnectingWebSocket","prototype","onopen","event","onclose","onconnecting","onmessage","onerror","debugAll","CONNECTING","WebSocket","OPEN","CLOSING","CLOSED","url","protocols","options","settings","debug","automaticOpen","reconnectInterval","maxReconnectInterval","reconnectDecay","timeoutInterval","maxReconnectAttempts","binaryType","key","this","reconnectAttempts","readyState","protocol","ws","self","forcedClose","timedOut","eventTarget","document","createElement","generateEvent","s","args","evt","createEvent","initCustomEvent","addEventListener","bind","removeEventListener","dispatchEvent","open","reconnectAttempt","console","localWs","timeout","setTimeout","close","clearTimeout","e","isReconnect","code","reason","wasClean","Math","pow","data","send","refresh","apply","exports","module","DEFAULT_HEAD_DIRECTION","TYPE_HEAD","TYPE_TAIL","TYPE_BODY","formatFrame","frame","Turn","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Snakes","Symbol","iterator","next","done","snake","value","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Body","part","X","Y","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Food","food","cleanFrame","positions","snakes","formatSnakes","turn","map","formatPosition","gameOver","isLastFrameOfGame","sanitizeFrame","sanitizedFrame","cloneDeep","i","headSvg","tailSvg","_id","formatSnake","body","_","partIndex","tailIndex","length","head","tail","currPart","nextPart","shouldRenderPart","type","getType","_formatPosition","x","y","direction","formatDirection","formatSnakePart","filter","color","Color","ID","name","Name","health","Health","isDead","Death","death","formatDeath","HeadType","toLowerCase","TailType","HeadSvg","TailSvg","cause","Cause","pos","getDirection","headDirection","uniqueIndex","Object","toConsumableArray","Set","p","concat","findIndex","max","a","b","oneLeft","windowPostMessage","parent","postMessage","error","parseArg","parts","split","decodeURIComponent","makeQueryString","query","sep","result","httpToWsProtocol","mappings","http","https","from","to","substr","Error","join","_len","arguments","Array","_key","reduce","current","cleanA","replace","cleanB","joinPair","BlankState","react_default","location","origin","React","Component","colors","breakpoints","themes","LoadingIndicatorWrapper","styled","display","alignItems","justifyContent","height","width","LoadingIndicator","className","style","HIGHLIGHT_DIM","DEAD_OPACITY","CELL_SIZE","CELL_SPACING","FOOD_SIZE","toFixed","toGridSpace","slot","getPartWidth","extraWidth","getPartHeight","extraHeight","getPartXOffset","xBias","getPartYOffset","yBias","getOpacity","highlightedSnake","range","size","push","Grid","snakeIndex","renderHeadPart","renderTailPart","behind","checkIfCornerPart","renderCornerPart","renderMiddlePart","highlighted","getHeadXOffset","getHeadYOffset","box","viewBox","baseVal","transform","halfX","halfY","getHeadTransform","viewBoxStr","fill","opacity","shapeRendering","dangerouslySetInnerHTML","__html","innerHTML","determineCornerType","d","getTailXOffset","getTailYOffset","getTailTransform","_this","unsortedSnakes","props","sortedSnakes","sort","viewBoxWidth","columns","viewBoxHeight","rows","maxWidth","maxHeight","row","col","theme","renderPart","f","foodIndex","cx","cy","r","renderGrid","Board","grid","streamAll","receive","turns","Promise","resolve","reject","ReconnectingWebsocket","obj","JSON","parse","loaded","getSvg","path","requireSvg","fetchSvg","_callee","response","svgText","svg","regenerator_default","wrap","_context","prev","fetch","sent","text","makeDom","abrupt","stop","wrapper","trim","firstChild","DEFAULT_SNAKE_HEAD","DEFAULT_SNAKE_TAIL","fetchResult","json","delay","millis","getAllSvgs","all","unique","assignHeadAndTailUrls","getSnakeHeadSvgUrl","getSnakeTailSvgUrl","setHeadAndTailSvgs","_callee2","_context2","paths","t0","finish","isIllegalSvgPath","nameOrPath","indexOf","svgUrlFromName","base","relative","prepareFrame","_callee3","_context3","fetchGameInfo","baseUrl","gameId","get","streamAllFrames","_x5","_x6","_x7","_streamAllFrames","_callee5","receiveFrame","game","chain","onFrame","wsUrl","_context5","then","asyncToGenerator","mark","_callee4","_context4","getFrameByTurn","frames","AvatarWrapper","_templateObject","_ref","paddingBottom","textShadow","HealthBarWrapper","background","borderRadius","HealthBar","_ref2","backgroundColor","CauseOfDeath","_ref3","padding","fontSize","lineHeight","Avatar","getReadableCauseOfDeath","Wrapper","scoreboard_templateObject","hide","_templateObject2","Scoreboard","state","toggleHighlight","getSnakeToHighlight","highlightSnake","setState","_this2","aliveSnakes","aLower","bLower","deadSnakes","reverse","orderSnakes","scoreboard_AvatarWrapper","onClick","avatar","MediaControlsWrapper","mediaControls_templateObject","TurnCount","marginBottom","KeyboardShortcutsWrapper","position","marginLeft","ShortcutsPaneTrigger","mediaControls_templateObject2","ShortcutsPane","_templateObject3","ButtonWrapper","Button","_templateObject4","MediaControls","paneHidden","handleParentKeyboardEvent","handleKeyEvent","keyboardCodeMap","toggleTheme","handleReload","reloadGame","handlePlayPause","toggleGamePause","handleBackward","stepBackwardFrame","handleForward","stepForwardFrame","handleShortcutPaneShowToggle","KeyR","ArrowLeft","ArrowRight","Space","renderControls","_this$props","currentFrame","hideControls","paused","disabled","react_keyboard_event_handler_default","handleKeys","values","onKeyEvent","SVGWrapper","logo_templateObject","StyledLogo","assign","xmlns","logo_templateObject2","q","PageWrapper","game_templateObject","GameBoardWrapper","BoardTitle","paddingLeft","paddingTop","fontFamily","textAlign","letterSpacing","HeaderWrapper","game_templateObject2","LogoWrapper","game_templateObject3","game_templateObject4","_ref4","TurnCountValue","_templateObject5","BoardWrapper","_templateObject6","_ref5","hideScoreboard","ScoreboardWrapper","_templateObject7","_ref6","Game","boardTheme","engine","title","setGameOptions","fetchFrames","invalidArgs","blank_state","renderGame","loading_indicator","board","mediaControls","hideMediaControls","logo","game_TurnCount","scoreboard","setTheme","setCurrentFrame","playFromFrame","dispatch","getState","frameRate","frameIndex","slicedFrames","ceiledFps","delayMillis","_frame3","lastFrame","gameOptions","slice","ceil","_x3","_x4","search","arg","connect","_getState$gameOptions","autoplay","engineUrl","_frame2","_x","_x2","_getState3","themeToSet","_x9","_x10","_getState","_getState2","_x8","_callee6","_getState4","nextFrame","stepToFrame","_context6","_x11","_x12","_ref7","_callee7","_getState5","prevFrame","_context7","_x13","_x14","snakeId","initialState","middleware","applyMiddleware","thunkMiddleware","store","createStore","action","objectSpread","parseInt","Height","Width","id","find","render","es","app","getElementById"],"mappings":"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","file":"static/js/main.199b37b4.chunk.js","sourcesContent":["/* eslint-disable */\n\n// MIT License:\n//\n// Copyright (c) 2010-2012, Joe Walnes\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * This behaves like a WebSocket in every way, except if it fails to connect,\n * or it gets disconnected, it will repeatedly poll until it successfully connects\n * again.\n *\n * It is API compatible, so when you have:\n *   ws = new WebSocket('ws://....');\n * you can replace with:\n *   ws = new ReconnectingWebSocket('ws://....');\n *\n * The event stream will typically look like:\n *  onconnecting\n *  onopen\n *  onmessage\n *  onmessage\n *  onclose // lost connection\n *  onconnecting\n *  onopen  // sometime later...\n *  onmessage\n *  onmessage\n *  etc...\n *\n * It is API compatible with the standard WebSocket API, apart from the following members:\n *\n * - `bufferedAmount`\n * - `extensions`\n * - `binaryType`\n *\n * Latest version: https://github.com/joewalnes/reconnecting-websocket/\n * - Joe Walnes\n *\n * Syntax\n * ======\n * var socket = new ReconnectingWebSocket(url, protocols, options);\n *\n * Parameters\n * ==========\n * url - The url you are connecting to.\n * protocols - Optional string or array of protocols.\n * options - See below\n *\n * Options\n * =======\n * Options can either be passed upon instantiation or set after instantiation:\n *\n * var socket = new ReconnectingWebSocket(url, null, { debug: true, reconnectInterval: 4000 });\n *\n * or\n *\n * var socket = new ReconnectingWebSocket(url);\n * socket.debug = true;\n * socket.reconnectInterval = 4000;\n *\n * debug\n * - Whether this instance should log debug messages. Accepts true or false. Default: false.\n *\n * automaticOpen\n * - Whether or not the websocket should attempt to connect immediately upon instantiation. The socket can be manually opened or closed at any time using ws.open() and ws.close().\n *\n * reconnectInterval\n * - The number of milliseconds to delay before attempting to reconnect. Accepts integer. Default: 1000.\n *\n * maxReconnectInterval\n * - The maximum number of milliseconds to delay a reconnection attempt. Accepts integer. Default: 30000.\n *\n * reconnectDecay\n * - The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. Accepts integer or float. Default: 1.5.\n *\n * timeoutInterval\n * - The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. Accepts integer. Default: 2000.\n *\n */\n(function(global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else {\n    global.ReconnectingWebSocket = factory();\n  }\n})(this, function() {\n  if (!(\"WebSocket\" in window)) {\n    return;\n  }\n\n  function ReconnectingWebSocket(url, protocols, options) {\n    // Default settings\n    var settings = {\n      /** Whether this instance should log debug messages. */\n      debug: false,\n\n      /** Whether or not the websocket should attempt to connect immediately upon instantiation. */\n      automaticOpen: true,\n\n      /** The number of milliseconds to delay before attempting to reconnect. */\n      reconnectInterval: 1000,\n      /** The maximum number of milliseconds to delay a reconnection attempt. */\n      maxReconnectInterval: 30000,\n      /** The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. */\n      reconnectDecay: 1.5,\n\n      /** The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. */\n      timeoutInterval: 2000,\n\n      /** The maximum number of reconnection attempts to make. Unlimited if null. */\n      maxReconnectAttempts: null,\n\n      /** The binary type, possible values 'blob' or 'arraybuffer', default 'blob'. */\n      binaryType: \"blob\"\n    };\n    if (!options) {\n      options = {};\n    }\n\n    // Overwrite and define settings with options if they exist.\n    for (var key in settings) {\n      if (typeof options[key] !== \"undefined\") {\n        this[key] = options[key];\n      } else {\n        this[key] = settings[key];\n      }\n    }\n\n    // These should be treated as read-only properties\n\n    /** The URL as resolved by the constructor. This is always an absolute URL. Read only. */\n    this.url = url;\n\n    /** The number of attempted reconnects since starting, or the last successful connection. Read only. */\n    this.reconnectAttempts = 0;\n\n    /**\n     * The current state of the connection.\n     * Can be one of: WebSocket.CONNECTING, WebSocket.OPEN, WebSocket.CLOSING, WebSocket.CLOSED\n     * Read only.\n     */\n    this.readyState = WebSocket.CONNECTING;\n\n    /**\n     * A string indicating the name of the sub-protocol the server selected; this will be one of\n     * the strings specified in the protocols parameter when creating the WebSocket object.\n     * Read only.\n     */\n    this.protocol = null;\n\n    // Private state variables\n\n    var self = this;\n    var ws;\n    var forcedClose = false;\n    var timedOut = false;\n    var eventTarget = document.createElement(\"div\");\n\n    // Wire up \"on*\" properties as event handlers\n\n    eventTarget.addEventListener(\"open\", function(event) {\n      self.onopen(event);\n    });\n    eventTarget.addEventListener(\"close\", function(event) {\n      self.onclose(event);\n    });\n    eventTarget.addEventListener(\"connecting\", function(event) {\n      self.onconnecting(event);\n    });\n    eventTarget.addEventListener(\"message\", function(event) {\n      self.onmessage(event);\n    });\n    eventTarget.addEventListener(\"error\", function(event) {\n      self.onerror(event);\n    });\n\n    // Expose the API required by EventTarget\n\n    this.addEventListener = eventTarget.addEventListener.bind(eventTarget);\n    this.removeEventListener = eventTarget.removeEventListener.bind(\n      eventTarget\n    );\n    this.dispatchEvent = eventTarget.dispatchEvent.bind(eventTarget);\n\n    /**\n     * This function generates an event that is compatible with standard\n     * compliant browsers and IE9 - IE11\n     *\n     * This will prevent the error:\n     * Object doesn't support this action\n     *\n     * http://stackoverflow.com/questions/19345392/why-arent-my-parameters-getting-passed-through-to-a-dispatched-event/19345563#19345563\n     * @param s String The name that the event should use\n     * @param args Object an optional object that the event will use\n     */\n    function generateEvent(s, args) {\n      var evt = document.createEvent(\"CustomEvent\");\n      evt.initCustomEvent(s, false, false, args);\n      return evt;\n    }\n\n    this.open = function(reconnectAttempt) {\n      ws = new WebSocket(self.url, protocols || []);\n      ws.binaryType = this.binaryType;\n\n      if (reconnectAttempt) {\n        if (\n          this.maxReconnectAttempts &&\n          this.reconnectAttempts > this.maxReconnectAttempts\n        ) {\n          return;\n        }\n      } else {\n        eventTarget.dispatchEvent(generateEvent(\"connecting\"));\n        this.reconnectAttempts = 0;\n      }\n\n      if (self.debug || ReconnectingWebSocket.debugAll) {\n        console.debug(\"ReconnectingWebSocket\", \"attempt-connect\", self.url);\n      }\n\n      var localWs = ws;\n      var timeout = setTimeout(function() {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\n            \"ReconnectingWebSocket\",\n            \"connection-timeout\",\n            self.url\n          );\n        }\n        timedOut = true;\n        localWs.close();\n        timedOut = false;\n      }, self.timeoutInterval);\n\n      ws.onopen = function(event) {\n        clearTimeout(timeout);\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\"ReconnectingWebSocket\", \"onopen\", self.url);\n        }\n        self.protocol = ws.protocol;\n        self.readyState = WebSocket.OPEN;\n        self.reconnectAttempts = 0;\n        var e = generateEvent(\"open\");\n        e.isReconnect = reconnectAttempt;\n        reconnectAttempt = false;\n        eventTarget.dispatchEvent(e);\n      };\n\n      ws.onclose = function(event) {\n        clearTimeout(timeout);\n        ws = null;\n        if (forcedClose) {\n          self.readyState = WebSocket.CLOSED;\n          eventTarget.dispatchEvent(generateEvent(\"close\"));\n        } else {\n          self.readyState = WebSocket.CONNECTING;\n          var e = generateEvent(\"connecting\");\n          e.code = event.code;\n          e.reason = event.reason;\n          e.wasClean = event.wasClean;\n          eventTarget.dispatchEvent(e);\n          if (!reconnectAttempt && !timedOut) {\n            if (self.debug || ReconnectingWebSocket.debugAll) {\n              console.debug(\"ReconnectingWebSocket\", \"onclose\", self.url);\n            }\n            eventTarget.dispatchEvent(generateEvent(\"close\"));\n          }\n\n          var timeout =\n            self.reconnectInterval *\n            Math.pow(self.reconnectDecay, self.reconnectAttempts);\n          setTimeout(\n            function() {\n              self.reconnectAttempts++;\n              self.open(true);\n            },\n            timeout > self.maxReconnectInterval\n              ? self.maxReconnectInterval\n              : timeout\n          );\n        }\n      };\n      ws.onmessage = function(event) {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\n            \"ReconnectingWebSocket\",\n            \"onmessage\",\n            self.url,\n            event.data\n          );\n        }\n        var e = generateEvent(\"message\");\n        e.data = event.data;\n        eventTarget.dispatchEvent(e);\n      };\n      ws.onerror = function(event) {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\"ReconnectingWebSocket\", \"onerror\", self.url, event);\n        }\n        eventTarget.dispatchEvent(generateEvent(\"error\"));\n      };\n    };\n\n    // Whether or not to create a websocket upon instantiation\n    if (this.automaticOpen == true) {\n      this.open(false);\n    }\n\n    /**\n     * Transmits data to the server over the WebSocket connection.\n     *\n     * @param data a text string, ArrayBuffer or Blob to send to the server.\n     */\n    this.send = function(data) {\n      if (ws) {\n        if (self.debug || ReconnectingWebSocket.debugAll) {\n          console.debug(\"ReconnectingWebSocket\", \"send\", self.url, data);\n        }\n        return ws.send(data);\n      } else {\n        throw \"INVALID_STATE_ERR : Pausing to reconnect websocket\";\n      }\n    };\n\n    /**\n     * Closes the WebSocket connection or connection attempt, if any.\n     * If the connection is already CLOSED, this method does nothing.\n     */\n    this.close = function(code, reason) {\n      // Default CLOSE_NORMAL code\n      if (typeof code == \"undefined\") {\n        code = 1000;\n      }\n      forcedClose = true;\n      if (ws) {\n        ws.close(code, reason);\n      }\n    };\n\n    /**\n     * Additional public API method to refresh the connection if still open (close, re-open).\n     * For example, if the app suspects bad data / missed heart beats, it can try to refresh.\n     */\n    this.refresh = function() {\n      if (ws) {\n        ws.close();\n      }\n    };\n  }\n\n  /**\n   * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\n   * this indicates that the connection is ready to send and receive data.\n   */\n  ReconnectingWebSocket.prototype.onopen = function(event) {};\n  /** An event listener to be called when the WebSocket connection's readyState changes to CLOSED. */\n  ReconnectingWebSocket.prototype.onclose = function(event) {};\n  /** An event listener to be called when a connection begins being attempted. */\n  ReconnectingWebSocket.prototype.onconnecting = function(event) {};\n  /** An event listener to be called when a message is received from the server. */\n  ReconnectingWebSocket.prototype.onmessage = function(event) {};\n  /** An event listener to be called when an error occurs. */\n  ReconnectingWebSocket.prototype.onerror = function(event) {};\n\n  /**\n   * Whether all instances of ReconnectingWebSocket should log debug messages.\n   * Setting this to true is the equivalent of setting all instances of ReconnectingWebSocket.debug to true.\n   */\n  ReconnectingWebSocket.debugAll = false;\n\n  ReconnectingWebSocket.CONNECTING = WebSocket.CONNECTING;\n  ReconnectingWebSocket.OPEN = WebSocket.OPEN;\n  ReconnectingWebSocket.CLOSING = WebSocket.CLOSING;\n  ReconnectingWebSocket.CLOSED = WebSocket.CLOSED;\n\n  return ReconnectingWebSocket;\n});\n","import cloneDeep from \"lodash.clonedeep\";\n\nconst DEFAULT_HEAD_DIRECTION = \"up\";\n\nconst TYPE_HEAD = \"head\";\nconst TYPE_TAIL = \"tail\";\nconst TYPE_BODY = \"body\";\n\nexport function formatFrame(frame) {\n  cleanFrame(frame);\n  const snakes = formatSnakes(frame.Snakes);\n  return {\n    turn: frame.Turn,\n    snakes: snakes,\n    food: formatPositions(frame.Food),\n    gameOver: isLastFrameOfGame(frame)\n  };\n}\n\nexport function sanitizeFrame(frame) {\n  // Copy without reference\n  const sanitizedFrame = cloneDeep(frame);\n\n  // nullify some fields\n  for (const i in sanitizedFrame.snakes) {\n    const snake = sanitizedFrame.snakes[i];\n    snake.headSvg = null;\n    snake.tailSvg = null;\n    snake._id = null;\n  }\n\n  return sanitizedFrame;\n}\n\nfunction formatSnakes(snakes) {\n  return snakes.map(formatSnake);\n}\n\nfunction formatSnake(snake) {\n  return {\n    body: snake.Body.map((_, i) => {\n      if (shouldRenderPart(snake, i)) {\n        return formatSnakePart(snake, i);\n      }\n      return null;\n    }).filter(part => part),\n    color: snake.Color,\n    _id: snake.ID,\n    name: snake.Name,\n    health: snake.Health,\n    isDead: !!snake.Death,\n    death: formatDeath(snake.Death),\n    head: snake.HeadType && snake.HeadType.toLowerCase(),\n    tail: snake.TailType && snake.TailType.toLowerCase(),\n    headSvg: snake.HeadSvg,\n    tailSvg: snake.TailSvg\n  };\n}\n\nfunction formatDeath(death) {\n  if (!death) {\n    return;\n  }\n\n  return {\n    cause: death.Cause,\n    turn: death.Turn || 0\n  };\n}\n\nfunction headDirection(snake) {\n  return snake.Body.length > 1\n    ? getDirection(snake.Body[1], snake.Body[0])\n    : DEFAULT_HEAD_DIRECTION;\n}\n\nfunction shouldRenderPart(snake, partIndex) {\n  const headIndex = 0;\n  const tailIndex = snake.Body.length - 1;\n  const head = snake.Body[headIndex];\n  const tail = snake.Body[tailIndex];\n  const currPart = snake.Body[partIndex];\n\n  // always render head\n  if (partIndex === headIndex) {\n    return true;\n  }\n\n  // render tail if not covered by head\n  if (partIndex === tailIndex) {\n    return !(head.X === currPart.X && head.Y === currPart.Y);\n  }\n\n  // render middle part if it's in a different position than\n  // the next piece closer to head, and not in same spot as tail\n  const nextPart = snake.Body[partIndex - 1];\n  return (\n    !(tail.X === currPart.X && tail.Y === currPart.Y) &&\n    !(nextPart && nextPart.X === currPart.X && nextPart.Y === currPart.Y)\n  );\n}\n\nfunction formatSnakePart(snake, partIndex) {\n  const part = snake.Body[partIndex];\n  const type = getType(snake, partIndex);\n  const { x, y } = formatPosition(part);\n  const direction = formatDirection(type, snake, part);\n\n  return {\n    direction,\n    type,\n    x,\n    y\n  };\n}\n\nfunction formatPositions(positions) {\n  return positions.map(formatPosition);\n}\n\nfunction formatPosition(pos) {\n  return {\n    x: pos.X,\n    y: pos.Y\n  };\n}\n\nfunction formatDirection(type, snake, part) {\n  let direction;\n  if (type === \"head\") {\n    direction = headDirection(snake);\n  } else {\n    // Determine a part's direction by the unique points (x,y)\n    // occupied by the snake.\n    const uniquePoints = [...new Set(snake.Body.map(p => `${p.X},${p.Y}`))];\n    const uniqueIndex = uniquePoints.findIndex(\n      p => p === `${part.X},${part.Y}`\n    );\n\n    direction = getDirection(\n      snake.Body[uniqueIndex],\n      snake.Body[Math.max(uniqueIndex - 1, 0)]\n    );\n  }\n\n  return direction;\n}\n\nfunction getDirection(a, b) {\n  if (a.X < b.X) {\n    return \"right\";\n  } else if (b.X < a.X) {\n    return \"left\";\n  } else if (a.Y < b.Y) {\n    return \"down\";\n  }\n  return \"up\";\n}\n\nfunction getType(snake, partIndex) {\n  if (partIndex === 0) {\n    return TYPE_HEAD;\n  }\n\n  if (partIndex === snake.Body.length - 1) {\n    return TYPE_TAIL;\n  }\n\n  return TYPE_BODY;\n}\n\n// This is a workaround for fields that are omitted when they have the default\n// value. ie: int fields that need to default to 0 rather than undefined.\nfunction cleanFrame(frame) {\n  frame.Turn = frame.Turn || 0;\n\n  for (const snake of frame.Snakes) {\n    for (const part of snake.Body) {\n      part.X = part.X || 0;\n      part.Y = part.Y || 0;\n    }\n  }\n\n  for (const food of frame.Food) {\n    food.X = food.X || 0;\n    food.Y = food.Y || 0;\n  }\n}\n\nfunction oneLeft(snakes) {\n  const alive = snakes.filter(s => !s.death);\n  return alive.length <= 1;\n}\n\nexport function isLastFrameOfGame(frame) {\n  const snakes = formatSnakes(frame.Snakes);\n\n  if (snakes.length === 0) {\n    return true;\n  }\n\n  if (snakes.length === 1) {\n    return !!snakes[0].death;\n  }\n\n  return oneLeft(snakes);\n}\n","import { formatFrame, sanitizeFrame } from \"../utils/game-state\";\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case \"SET_THEME\":\n      return { ...state, theme: action.theme };\n    case \"SET_GAME_OPTIONS\":\n      action.gameOptions.autoplay =\n        action.gameOptions.autoplay && action.gameOptions.autoplay === \"true\";\n      action.gameOptions.turn = parseInt(action.gameOptions.turn) || 0;\n      return { ...state, gameOptions: action.gameOptions };\n    case \"PAUSE_GAME\":\n      return { ...state, paused: true };\n    case \"GAME_OVER\":\n      return { ...state, paused: true };\n    case \"RESUME_GAME\":\n      return { ...state, paused: false };\n    case \"SET_CURRENT_FRAME\":\n      windowPostMessage({\n        action: action.type,\n        frame: sanitizeFrame(action.frame)\n      });\n      return { ...state, currentFrame: action.frame };\n    case \"RECEIVE_FRAME\":\n      const frame = formatFrame(action.frame);\n      return {\n        ...state,\n        grid: {\n          height: action.game.Game.Height,\n          width: action.game.Game.Width\n        },\n        frames: [...state.frames, frame] // Be smart: this consumes A LOT of memory...\n      };\n    case \"REQUEST_FRAMES\":\n      return { ...state };\n    case \"FETCH_FRAMES\":\n      return { ...state };\n    case \"HIGHLIGHT_SNAKE\":\n      windowPostMessage({\n        action: action.type,\n        id: action.snakeId,\n        name: action.snakeId\n          ? state.currentFrame.snakes.find(s => s._id === action.snakeId).name\n          : null\n      });\n      return { ...state, highlightedSnake: action.snakeId };\n    default:\n      return { ...state };\n  }\n};\n\nfunction windowPostMessage(data) {\n  if (!window.parent) {\n    return;\n  }\n  try {\n    window.parent.postMessage(data, \"*\");\n  } catch (e) {\n    console.error(e);\n  }\n}\n","// Creates a dictionary of parameters based on the given query string. q should\n// look like \"?foo=bar&thing=blah\".\nexport function parseQueryString(q) {\n  if (!q || !q.length) {\n    return {};\n  }\n\n  // Array of key/value pairs\n  const args = q\n    .substr(1)\n    .split(\"&\")\n    .map(parseArg);\n\n  // Convert to object\n  return args.reduce((result, arg) => {\n    result[arg.key] = arg.value;\n    return result;\n  }, {});\n}\n\n// Converts \"asdf=qwer\" to { asdf: \"qwer\" } or \"asdf\" to { asdf: true }. The\n// latter example is to allow switch-like parameters like ?enableThing without\n// an equals sign.\nfunction parseArg(a) {\n  const parts = a.split(\"=\");\n  const key = parts[0];\n  const value = parts[1] === undefined ? true : decodeURIComponent(parts[1]);\n  return { key, value };\n}\n\n// Converts { a: \"aaa\", b: \"bbb\" } to \"?a=aaa&b=bbb\"\nexport function makeQueryString(query) {\n  if (!query) {\n    return \"\";\n  }\n\n  let sep = \"?\";\n  let result = \"\";\n\n  for (const key in query) {\n    const value = query[key];\n    result += `${sep}${key}=${value}`;\n    sep = \"&\";\n  }\n\n  return result;\n}\n\n// Converts http://foo to ws://foo or https://foo to wss://foo\nexport function httpToWsProtocol(url) {\n  const mappings = {\n    http: \"ws\",\n    https: \"wss\"\n  };\n\n  for (const from in mappings) {\n    const to = mappings[from];\n    if (url.substr(0, from.length + 1) === from + \":\") {\n      return to + url.substr(from.length);\n    }\n  }\n\n  throw new Error(\"Invalid URL: \" + url);\n}\n\n// Joins path components and makes sure there is exactly one '/' separating\n// them.\nexport function join(...parts) {\n  function joinPair(a, b) {\n    const cleanA = a.replace(/\\/+$/, \"\");\n    const cleanB = b.replace(/^\\/+/, \"\");\n\n    if (cleanA === \"\") {\n      return cleanB;\n    }\n\n    if (cleanB === \"\") {\n      return cleanA;\n    }\n\n    return `${cleanA}/${cleanB}`;\n  }\n\n  return parts.reduce((current, next) => joinPair(current, next), \"\");\n}\n","import React from \"react\";\n\nclass BlankState extends React.Component {\n  render() {\n    return (\n      <div>\n        To run a game you need to specify engine and game parameters in the URL.\n        For example:\n        <pre>\n          {window.location.origin}?engine=&lt;ENGINE_URL&gt;&amp;game=&lt;GAME_ID&gt;\n        </pre>\n      </div>\n    );\n  }\n}\n\nexport default BlankState;\n","export const colors = {\n  // Page\n  pageBackground: \"transparent\",\n\n  // Grid\n  gridDot: \"#6a208f\",\n  gridCellBackground: \"#f1f1f1\",\n  gridCellBackgroundDark: \"#D6D5EA\",\n  food: \"#ff5c75\",\n\n  // Scoreboard\n  healthBar: \"#0f0\",\n  healthBarBackground: \"#fefefe\",\n  healthBarOutline: \"#666\",\n  healthBarDeathBackground: \"#f1f1f1\",\n  healthBarDeathBackgroundDark: \"#59526b\",\n\n  // Misc\n  lightText: \"#efefef\",\n  darkText: \"#222\",\n\n  // Colour names (from theme)\n  blue: \"#007bff\",\n  indigo: \"#6610f2\",\n  purple: \"#6f42c1\",\n  pink: \"#e83e8c\",\n  red: \"#dc3545\",\n  orange: \"#fd7e14\",\n  yellow: \"#ffc107\",\n  green: \"#28a745\",\n  teal: \"#20c997\",\n  cyan: \"#17a2b8\",\n  white: \"#fff\",\n  gray: \"#6c757d\",\n  grayLight: \"#f1f1f1\",\n  grayDark: \"#343a40\",\n  primary: \"#007bff\",\n  secondary: \"#6c757d\",\n  success: \"#28a745\",\n  info: \"#17a2b8\",\n  warning: \"#ffc107\",\n  danger: \"#dc3545\",\n  light: \"#f8f9fa\",\n  dark: \"#343a40\"\n};\n\nexport const breakpoints = {\n  sm: \"576px\",\n  md: \"768px\",\n  lg: \"992px\",\n  xl: \"1200px\",\n  xxl: \"1650px\"\n};\n\nexport const themes = {\n  // Themes\n  dark: \"dark\",\n  light: \"light\"\n};\n","import React from \"react\";\nimport styled from \"react-emotion\";\n\nimport { colors } from \"../theme\";\n\nconst LoadingIndicatorWrapper = styled(\"div\")({\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  height: \"100%\",\n  width: \"100%\"\n});\n\nclass LoadingIndicator extends React.Component {\n  render() {\n    return (\n      <LoadingIndicatorWrapper>\n        <div\n          className=\"la-ball-grid-beat la-dark la-2x\"\n          style={{\n            color: colors.food\n          }}\n        >\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n          <div />\n        </div>\n      </LoadingIndicatorWrapper>\n    );\n  }\n}\n\nexport default LoadingIndicator;\n","import React from \"react\";\nimport { colors, themes } from \"../theme\";\n\nconst HIGHLIGHT_DIM = 0.15;\nconst DEAD_OPACITY = 0.1;\n\nconst CELL_SIZE = 20;\nconst CELL_SPACING = 4;\nconst FOOD_SIZE = (CELL_SIZE / 3.25).toFixed(2);\n\nfunction toGridSpace(slot) {\n  return (CELL_SIZE + CELL_SPACING) * slot + CELL_SPACING;\n}\n\nfunction getPartWidth(part) {\n  const extraWidth =\n    part.direction === \"left\" || part.direction === \"right\" ? CELL_SPACING : 0;\n  return CELL_SIZE + extraWidth;\n}\n\nfunction getPartHeight(part) {\n  const extraHeight =\n    part.direction === \"up\" || part.direction === \"down\" ? CELL_SPACING : 0;\n  return CELL_SIZE + extraHeight;\n}\n\nfunction getPartXOffset(part) {\n  const xBias = part.direction === \"left\" ? -CELL_SPACING : 0;\n  return toGridSpace(part.x) + xBias;\n}\n\nfunction getPartYOffset(part) {\n  const yBias = part.direction === \"up\" ? -CELL_SPACING : 0;\n  return toGridSpace(part.y) + yBias;\n}\n\nfunction getTailXOffset(part) {\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x) - CELL_SPACING;\n    case \"right\":\n      return toGridSpace(part.x) + CELL_SPACING;\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getTailYOffset(part) {\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y) - CELL_SPACING;\n    case \"down\":\n      return toGridSpace(part.y) + CELL_SPACING;\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getHeadXOffset(part) {\n  switch (part.direction) {\n    case \"left\":\n      return toGridSpace(part.x);\n    case \"right\":\n      return toGridSpace(part.x);\n    default:\n      return toGridSpace(part.x);\n  }\n}\n\nfunction getHeadYOffset(part) {\n  switch (part.direction) {\n    case \"up\":\n      return toGridSpace(part.y);\n    case \"down\":\n      return toGridSpace(part.y);\n    default:\n      return toGridSpace(part.y);\n  }\n}\n\nfunction getOpacity(snake, highlightedSnake) {\n  if (!snake.isDead) {\n    if (highlightedSnake) {\n      return snake._id === highlightedSnake ? 1 : HIGHLIGHT_DIM;\n    }\n  } else {\n    if (highlightedSnake) {\n      return snake._id === highlightedSnake ? 1 : 0;\n    }\n  }\n\n  return snake.isDead ? DEAD_OPACITY : 1;\n}\n\nfunction range(size) {\n  const result = [];\n  for (let i = 0; i < size; i++) {\n    result.push(i);\n  }\n  return result;\n}\n\nfunction sortAliveSnakesOnTop(snakes) {\n  return snakes.concat().sort((a, b) => {\n    const aOrder = a.isDead ? 0 : 1;\n    const bOrder = b.isDead ? 0 : 1;\n    return aOrder - bOrder;\n  });\n}\n\nfunction getHeadTransform(direction, viewBox) {\n  const halfX = viewBox.width / 2;\n  const halfY = viewBox.height / 2;\n  switch (direction) {\n    case \"left\":\n      return `scale(-1,1) translate(-100, 0)`;\n    case \"up\":\n      return `rotate(-90 ${halfX} ${halfY})`;\n    case \"down\":\n      return `rotate(90 ${halfX} ${halfY})`;\n    default:\n      return \"\";\n  }\n}\n\nfunction getTailTransform(direction, viewBox) {\n  const halfX = viewBox.width / 2;\n  const halfY = viewBox.height / 2;\n  switch (direction) {\n    case \"right\":\n      return `rotate(180 ${halfX} ${halfY})`;\n    case \"down\":\n      return `rotate(-90 ${halfX} ${halfY})`;\n    case \"up\":\n      return `rotate(90 ${halfX} ${halfY})`;\n    default:\n      return \"\";\n  }\n}\n\nfunction checkIfCornerPart(snake, partIndex) {\n  // If head or tail of the snake, then false\n  if (partIndex === 0 || partIndex === snake.body.length - 1) return false;\n\n  const behind = snake.body[partIndex + 1];\n  const current = snake.body[partIndex];\n\n  // Return false if the behind part has the same position as the current.\n  // Relevant for when the snake initially spawns.\n  if (behind.x === current.x && behind.y === current.y) return false;\n\n  return behind.direction !== current.direction;\n}\n\nfunction determineCornerType(snake, partIndex) {\n  // If head or tail of the snake, then false\n  if (partIndex === 0 || partIndex === snake.body.length - 1) return false;\n\n  const behind = snake.body[partIndex + 1];\n  const current = snake.body[partIndex];\n\n  return `${current.direction} ${behind.direction}`;\n}\n\nclass Grid extends React.Component {\n  renderPart(snake, snakeIndex, part, partIndex, highlightedSnake) {\n    switch (part.type) {\n      case \"head\":\n        return this.renderHeadPart(snake, snakeIndex, part, highlightedSnake);\n      case \"tail\":\n        return this.renderTailPart(snake, snakeIndex, part, highlightedSnake);\n      default:\n        if (checkIfCornerPart(snake, partIndex)) {\n          return this.renderCornerPart(\n            snake,\n            snakeIndex,\n            part,\n            partIndex,\n            highlightedSnake\n          );\n        } else {\n          return this.renderMiddlePart(\n            snake,\n            snakeIndex,\n            part,\n            partIndex,\n            highlightedSnake\n          );\n        }\n    }\n  }\n\n  renderHeadPart(snake, snakeIndex, part, highlighted) {\n    const x = getHeadXOffset(part);\n    const y = getHeadYOffset(part);\n    const box = snake.headSvg.viewBox.baseVal;\n    const transform = getHeadTransform(part.direction, box);\n    const viewBoxStr = `${box.x} ${box.y} ${box.width} ${box.height}`;\n\n    return (\n      <svg\n        key={\"part\" + snakeIndex + \",head\"}\n        viewBox={viewBoxStr}\n        x={x}\n        y={y}\n        width={CELL_SIZE}\n        height={CELL_SIZE}\n        fill={snake.color}\n        opacity={getOpacity(snake, highlighted)}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <g\n          transform={transform}\n          dangerouslySetInnerHTML={{ __html: snake.headSvg.innerHTML }}\n        />\n      </svg>\n    );\n  }\n\n  renderMiddlePart(snake, snakeIndex, part, partIndex, highlighted) {\n    return (\n      <rect\n        key={`part${snakeIndex},${part.x},${part.y}`}\n        x={getPartXOffset(part)}\n        y={getPartYOffset(part)}\n        width={getPartWidth(part)}\n        height={getPartHeight(part)}\n        fill={snake.color}\n        opacity={getOpacity(snake, highlighted)}\n        shapeRendering=\"optimizeSpeed\"\n      />\n    );\n  }\n\n  renderCornerPart(snake, snakeIndex, part, partIndex, highlighted) {\n    let viewBox, transform;\n    let path = \"M0,0 h40 a60,60 0 0 1 60,60 v80 h-100 z\";\n\n    switch (part.direction) {\n      case \"left\":\n      case \"right\":\n        viewBox = \"0 0 120 100\";\n        break;\n      case \"up\":\n      case \"down\":\n      default:\n        viewBox = \"0 0 100 120\";\n        break;\n    }\n\n    switch (determineCornerType(snake, partIndex)) {\n      case \"down left\":\n        transform = \"scale(-1,1) translate(-100, 0)\";\n        break;\n      case \"left down\":\n        transform = \"rotate(90,0,0) translate(0,-120)\";\n        break;\n      case \"right down\":\n        transform = \"rotate(90,0,0) scale(1,-1)\";\n        break;\n      case \"up right\":\n        transform = \"scale(1,-1) translate(0,-120)\";\n        break;\n      case \"up left\":\n        transform = \"scale(-1,-1) translate(-100,-120)\";\n        break;\n      case \"right up\":\n        transform = \"rotate(-90,0,0) translate(-100,0)\";\n        break;\n      case \"left up\":\n        transform = \"rotate(-90,0,0) scale(1,-1) translate(-100,-120)\";\n        break;\n      case \"down right\":\n      default:\n        break;\n    }\n\n    return (\n      <svg\n        key={`part${snakeIndex},${part.x},${part.y}`}\n        x={getPartXOffset(part)}\n        y={getPartYOffset(part)}\n        width={getPartWidth(part)}\n        height={getPartHeight(part)}\n        opacity={getOpacity(snake, highlighted)}\n        fill={snake.color}\n        viewBox={viewBox}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <path d={path} transform={transform} />\n      </svg>\n    );\n  }\n\n  renderTailPart(snake, snakeIndex, part, highlighted) {\n    const x = getTailXOffset(part);\n    const y = getTailYOffset(part);\n    const box = snake.tailSvg.viewBox.baseVal;\n    const transform = getTailTransform(part.direction, box);\n    const viewBoxStr = `${box.x} ${box.y} ${box.width} ${box.height}`;\n\n    return (\n      <svg\n        key={\"part\" + snakeIndex + \",tail\"}\n        viewBox={viewBoxStr}\n        x={x}\n        y={y}\n        width={CELL_SIZE}\n        height={CELL_SIZE}\n        fill={snake.color}\n        opacity={getOpacity(snake, highlighted)}\n        shapeRendering=\"optimizeSpeed\"\n      >\n        <g\n          transform={transform}\n          dangerouslySetInnerHTML={{ __html: snake.tailSvg.innerHTML }}\n        />\n      </svg>\n    );\n  }\n\n  renderGrid() {\n    const unsortedSnakes = this.props.snakes || [];\n    const food = this.props.food || [];\n\n    // Make alive snakes render on top of dead snakes\n    const sortedSnakes = sortAliveSnakesOnTop(unsortedSnakes);\n\n    const viewBoxWidth = toGridSpace(this.props.columns);\n    const viewBoxHeight = toGridSpace(this.props.rows);\n\n    return (\n      <svg\n        width={this.props.maxWidth}\n        height={this.props.maxHeight}\n        x={this.props.x}\n        y={this.props.y}\n        viewBox={`0 0 ${viewBoxWidth} ${viewBoxHeight}`}\n      >\n        {range(this.props.rows).map((_, row) =>\n          range(this.props.columns).map((_, col) => (\n            <rect\n              key={\"cell\" + row + \",\" + col}\n              x={toGridSpace(col)}\n              y={toGridSpace(row)}\n              width={CELL_SIZE}\n              height={CELL_SIZE}\n              fill={\n                this.props.theme === themes.dark\n                  ? colors.gridCellBackgroundDark\n                  : colors.gridCellBackground\n              }\n              shapeRendering=\"optimizeSpeed\"\n            />\n          ))\n        )}\n\n        {sortedSnakes.map((snake, snakeIndex) => {\n          return snake.body.map((part, partIndex) =>\n            this.renderPart(\n              snake,\n              snakeIndex,\n              part,\n              partIndex,\n              this.props.highlightedSnake\n            )\n          );\n        })}\n\n        {food.map((f, foodIndex) => (\n          <circle\n            key={\"food\" + foodIndex}\n            cx={toGridSpace(f.x) + CELL_SIZE / 2}\n            cy={toGridSpace(f.y) + CELL_SIZE / 2}\n            r={FOOD_SIZE}\n            fill={colors.food}\n            shapeRendering=\"optimizeQuality\"\n          />\n        ))}\n      </svg>\n    );\n  }\n\n  render() {\n    if (this.props.snakes) {\n      return this.renderGrid();\n    } else {\n      return;\n    }\n  }\n}\n\nexport default Grid;\n","import React from \"react\";\nimport Grid from \"./grid\";\n\nconst BOARD_SIZE = 100;\n\nclass Board extends React.Component {\n  render() {\n    return (\n      <svg viewBox={`0 0 ${BOARD_SIZE} ${BOARD_SIZE}`}>\n        <Grid\n          snakes={this.props.snakes}\n          food={this.props.food}\n          columns={this.props.columns}\n          rows={this.props.rows}\n          highlightedSnake={this.props.highlightedSnake}\n          theme={this.props.theme}\n          maxWidth={BOARD_SIZE}\n          maxHeight={BOARD_SIZE}\n          x={0}\n          y={0}\n        />\n      </svg>\n    );\n  }\n}\n\nexport default Board;\n","import ReconnectingWebsocket from \"./reconnecting-websocket\";\n\n// Establishes websocket connection on given url and then calls receive for\n// every object sent from the server. Returns a promise that resolves when\n// receive returns true or when the server closes the connection.\nexport function streamAll(url, receive) {\n  const turns = {};\n  let done = false;\n\n  return new Promise((resolve, reject) => {\n    const ws = new ReconnectingWebsocket(url);\n    ws.addEventListener(\"message\", e => {\n      const obj = JSON.parse(e.data);\n      if (turns[obj.Turn]) {\n        return;\n      }\n      turns[obj.Turn] = true;\n\n      done = receive(obj);\n      if (done) {\n        ws.close();\n        resolve();\n      }\n    });\n\n    ws.addEventListener(\"onerror\", e => {\n      reject(e);\n    });\n\n    ws.addEventListener(\"onclose\", e => {\n      if (!done) {\n        done = true;\n        resolve();\n      }\n    });\n  });\n}\n","/**\n * This file contains helper functions for async loading svg files that\n * can be injected inline into an html <svg> element. This is better than\n * alternatives for the following reasons:\n *\n *    <use href=\"...\"> has a problem where the game could start before the\n *    svg has finished loading whereas this method gives a promise we can wait\n *    for.\n *\n *    <image src=\"...\"> has a problem where the fill color of the image cannot\n *    be overriden. Inline svg solves this problem and allows css styles to\n *    cascade into the svg content. <use> may also have this problem?\n *\n *    Directly embedding the svg xml into react components (or similar) would\n *    mostly solve everything except that it eliminates the possibility of\n *    pulling in svg data from external trusted sources.\n *\n * The main downside to this method is that the source of the svg must be\n * trusted or else you are vulnerable to xss attacks.\n */\n\nconst loaded = {};\n\nexport function loadSvgs(paths) {\n  return Promise.all(paths.map(requireSvg));\n}\n\nexport function getSvg(path) {\n  return loaded[path];\n}\n\nfunction requireSvg(path) {\n  if (path in loaded) {\n    return Promise.resolve(loaded[path]);\n  }\n\n  return fetchSvg(path);\n}\n\nasync function fetchSvg(path) {\n  const response = await fetch(path);\n  const svgText = await response.text();\n  const svg = makeDom(svgText);\n  loaded[path] = svg;\n  return svg;\n}\n\nfunction makeDom(svgText) {\n  const wrapper = document.createElement(\"div\");\n  wrapper.innerHTML = svgText.trim();\n  return wrapper.firstChild;\n}\n","import { streamAll } from \"../io/websocket\";\nimport { makeQueryString, httpToWsProtocol, join } from \"./url\";\nimport { loadSvgs, getSvg } from \"./inline-svg\";\nimport { isLastFrameOfGame } from \"./game-state\";\n\nconst DEFAULT_SNAKE_HEAD = \"regular\";\nconst DEFAULT_SNAKE_TAIL = \"regular\";\n\nasync function get(url, query) {\n  const fetchResult = await fetch(url + makeQueryString(query));\n  return fetchResult.json();\n}\n\nexport function delay(millis) {\n  return new Promise(resolve => setTimeout(resolve, millis));\n}\n\nexport function getReadableCauseOfDeath(cause) {\n  // Based on https://github.com/battlesnakeio/engine/blob/master/rules/death_cause.go\n\n  switch (cause) {\n    case \"snake-collision\":\n      return \"Collided with snake body\";\n    case \"snake-self-collision\":\n      return \"Collided with own body\";\n    case \"starvation\":\n      return \"Starvation\";\n    case \"head-collision\":\n      return \"Head on head collision\";\n    case \"wall-collision\":\n      return \"Collided with a wall\";\n    default:\n      return cause;\n  }\n}\n\n// Gets a list of all unique SVG paths required by the snakes.\nfunction getAllSvgs(snakes) {\n  const all = snakes.reduce((result, snake) => {\n    return result.concat([snake.HeadType, snake.TailType]);\n  }, []);\n  const unique = new Set(all);\n  return Array.from(unique);\n}\n\nfunction assignHeadAndTailUrls(snakes) {\n  for (const snake of snakes) {\n    // Assign default if missing\n    if (!snake.HeadType) {\n      snake.HeadType = DEFAULT_SNAKE_HEAD;\n    }\n    if (!snake.TailType) {\n      snake.TailType = DEFAULT_SNAKE_TAIL;\n    }\n\n    // Format as actual URL if it's just a name\n    snake.HeadType = getSnakeHeadSvgUrl(snake.HeadType);\n    snake.TailType = getSnakeTailSvgUrl(snake.TailType);\n  }\n}\n\nasync function setHeadAndTailSvgs(snakes) {\n  assignHeadAndTailUrls(snakes);\n  await loadSvgs(getAllSvgs(snakes));\n\n  for (const snake of snakes) {\n    snake.HeadSvg = getSvg(snake.HeadType);\n    snake.TailSvg = getSvg(snake.TailType);\n  }\n}\n\nfunction isIllegalSvgPath(nameOrPath) {\n  return nameOrPath.indexOf(\"/\") >= 0 || nameOrPath.indexOf(\".\") >= 0;\n}\n\nfunction svgUrlFromName(base, relative) {\n  return join(base, relative) + \".svg\";\n}\n\nfunction getSnakeHeadSvgUrl(path) {\n  const effectivePath = isIllegalSvgPath(path) ? DEFAULT_SNAKE_HEAD : path;\n  return svgUrlFromName(\"images/snake/head\", effectivePath);\n}\n\nfunction getSnakeTailSvgUrl(path) {\n  const effectivePath = isIllegalSvgPath(path) ? DEFAULT_SNAKE_TAIL : path;\n  return svgUrlFromName(\"images/snake/tail\", effectivePath);\n}\n\nasync function prepareFrame(frame) {\n  await setHeadAndTailSvgs(frame.Snakes);\n}\n\nexport function fetchGameInfo(baseUrl, gameId) {\n  const url = join(baseUrl, `games/${gameId}`);\n  return get(url);\n}\n\nexport async function streamAllFrames(baseUrl, gameId, receiveFrame) {\n  const game = await fetchGameInfo(baseUrl, gameId);\n\n  let chain = Promise.resolve();\n  function onFrame(frame) {\n    chain = chain.then(async () => {\n      await prepareFrame(frame);\n      return receiveFrame(game, frame);\n    });\n    return isLastFrameOfGame(frame);\n  }\n\n  const wsUrl = join(httpToWsProtocol(baseUrl), `socket/${gameId}`);\n  await streamAll(wsUrl, onFrame);\n  await chain;\n}\n\nexport function getFrameByTurn(frames, turn) {\n  return frames.filter(frame => frame.turn === turn)[0];\n}\n","import React from \"react\";\nimport styled from \"react-emotion\";\nimport { breakpoints, colors, themes } from \"../theme\";\nimport { getReadableCauseOfDeath } from \"../utils/engine-client\";\n\nconst AvatarWrapper = styled(\"div\")`\n  margin-bottom: 0.5rem;\n  padding-bottom: 1rem;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n\n  @media (min-width: ${breakpoints.lg}) {\n    margin-bottom: 1rem;\n  }\n`;\n\nconst Name = styled(\"span\")(({ theme }) => ({\n  display: \"block\",\n  paddingBottom: \"1rem\",\n  textShadow: theme === themes.dark ? \"0 1px 2px rgba(0,0,0,0.90)\" : null\n}));\n\nconst HealthBarWrapper = styled(\"div\")({\n  width: \"100%\",\n  height: \"1.8rem\",\n  background: colors.healthBarBackground,\n  borderRadius: \"1.5rem\"\n});\n\nconst HealthBar = styled(\"div\")(({ color }) => ({\n  height: \"100%\",\n  backgroundColor: color,\n  borderRadius: \"inherit\"\n}));\n\nconst CauseOfDeath = styled(\"div\")(({ theme }) => ({\n  height: \"100%\",\n  padding: \".2rem .8rem\",\n  fontSize: \"1.5rem\",\n  lineHeight: \"1.3rem\",\n  backgroundColor:\n    theme === themes.dark\n      ? colors.healthBarDeathBackgroundDark\n      : colors.healthBarDeathBackground,\n  borderRadius: \"inherit\",\n  color: theme === themes.dark ? colors.lightText : colors.darkText\n}));\n\nclass Avatar extends React.Component {\n  render() {\n    return (\n      <AvatarWrapper>\n        <Name>{this.props.snake.name}</Name>\n        <HealthBarWrapper>\n          {this.props.snake.death ? (\n            <CauseOfDeath theme={this.props.theme}>\n              {getReadableCauseOfDeath(this.props.snake.death.cause)}\n            </CauseOfDeath>\n          ) : (\n            <HealthBar\n              color={this.props.snake.color}\n              style={{\n                width: `${this.props.snake.health}%`\n              }}\n            />\n          )}\n        </HealthBarWrapper>\n      </AvatarWrapper>\n    );\n  }\n}\n\nexport default Avatar;\n","import React from \"react\";\nimport styled from \"react-emotion\";\nimport Avatar from \"./avatar\";\nimport { breakpoints, colors, themes } from \"../theme\";\n\nconst orderSnakes = snakes => {\n  // Sort by name\n  const aliveSnakes = snakes\n    .filter(s => !s.isDead)\n    .sort((a, b) => {\n      const aLower = a.name.toLowerCase();\n      const bLower = b.name.toLowerCase();\n      if (aLower < bLower) {\n        return -1;\n      }\n      if (aLower > bLower) {\n        return 1;\n      }\n      return 0;\n    });\n\n  // Sort by turn died, descending\n  const deadSnakes = snakes\n    .filter(s => s.isDead)\n    .sort((a, b) => a.death.turn - b.death.turn)\n    .reverse();\n\n  return aliveSnakes.concat(deadSnakes);\n};\n\nconst Wrapper = styled(\"div\")`\n  display: none;\n  padding-right: 2rem;\n  color: ${({ theme }) =>\n    theme === themes.dark ? colors.lightText : colors.darkText};\n  font-weight: 600;\n  font-size: 1.4rem;\n\n  @media (min-width: ${breakpoints.md}) {\n    display: ${({ hide }) => (hide ? \"none\" : \"block\")};\n    font-size: 1.8rem;\n  }\n\n  @media (min-width: ${breakpoints.xxl}) {\n    font-size: 3.2rem;\n    letter-spacing: 0.1rem;\n  }\n`;\n\nconst AvatarWrapper = styled(\"div\")`\n  transition: background-color 0.2s, box-shadow 0.2s;\n  box-shadow: ${props =>\n    props.highlighted ? `0 0 0 1px ${colors.lightText}` : null};\n\n  &:hover {\n    background-color: ${props =>\n      props.theme === themes.dark ? colors.purple : colors.light};\n    cursor: pointer;\n  }\n`;\n\nclass Scoreboard extends React.Component {\n  state = {\n    highlightedSnake: null\n  };\n\n  toggleHighlight = snake => {\n    const getSnakeToHighlight = (state, snake) => {\n      return state.highlightedSnake !== snake._id ? snake._id : null;\n    };\n\n    this.props.highlightSnake(getSnakeToHighlight(this.state, snake));\n\n    this.setState(state => ({\n      highlightedSnake: getSnakeToHighlight(state, snake)\n    }));\n  };\n\n  render() {\n    const { highlightedSnake } = this.state;\n    return (\n      <Wrapper theme={this.props.theme}>\n        {this.props.snakes\n          ? orderSnakes(this.props.snakes).map((snake, i) => (\n              <AvatarWrapper\n                key={\"avatarwrapper\" + i}\n                onClick={() => this.toggleHighlight(snake)}\n                highlighted={highlightedSnake === snake._id}\n                theme={this.props.theme}\n              >\n                <Avatar\n                  snake={snake}\n                  key={\"avatar\" + i}\n                  theme={this.props.theme}\n                />\n              </AvatarWrapper>\n            ))\n          : undefined}\n      </Wrapper>\n    );\n  }\n}\n\nexport default Scoreboard;\n","import React from \"react\";\nimport styled from \"react-emotion\";\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\n\nimport { themes, breakpoints } from \"../theme\";\n\nconst MediaControlsWrapper = styled(\"div\")`\n  display: ${({ hide }) => (hide ? \"none\" : \"block\")};\n  margin-top: 1rem;\n  width: 100%;\n`;\n\nconst TurnCount = styled(\"div\")(({ theme }) => ({\n  display: \"flex\",\n  color: theme === themes.dark ? \"#eee\" : \"#333\",\n  justifyContent: \"center\",\n  marginBottom: \"2rem\",\n  fontSize: \"1.4rem\"\n}));\n\nconst KeyboardShortcutsWrapper = styled(\"div\")({\n  position: \"relative\",\n  marginLeft: \"1rem\"\n});\n\nconst ShortcutsPaneTrigger = styled(\"div\")`\n  margin: 0;\n  padding: 1rem;\n  height: 3rem;\n  width: 3rem;\n  background: #dfdfdf;\n  border-radius: 50%;\n  line-height: 0.5;\n  text-align: center;\n\n  &:hover {\n    cursor: pointer;\n  }\n`;\n\nconst ShortcutsPane = styled(\"div\")`\n  position: absolute;\n  bottom: 2.5rem;\n  right: 2.5rem;\n  width: 20rem;\n  padding: 1rem;\n  border: solid 1px #999;\n  background: #fff;\n\n  @media (min-width: ${breakpoints.md}) {\n    left: 2.5rem;\n    right: 0;\n  }\n\n  h4 {\n    margin-top: 0;\n    margin-bottom: 1rem;\n  }\n\n  ul {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n  }\n`;\n\nconst ButtonWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"center\",\n  width: \"100%\",\n  marginBottom: \"2rem\"\n});\n\nconst Button = styled(\"button\")`\n  display: inline-block;\n  min-width: 3rem;\n  text-align: center;\n  background: transparent;\n  color: ${({ theme }) => (theme === themes.dark ? \"#eee\" : \"#333\")};\n  font-size: 1.4rem;\n  border: none;\n  text-decoration: none;\n  text-align: center;\n  cursor: pointer;\n  transition: background 250ms ease-in-out, transform 150ms ease;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: #ccc;\n    cursor: not-allowed;\n  }\n`;\n\nclass MediaControls extends React.Component {\n  state = {\n    paneHidden: true\n  };\n\n  componentWillMount() {\n    this.keyboardCodeMap = {\n      KeyR: \"r\",\n      ArrowLeft: \"left\",\n      ArrowRight: \"right\",\n      Space: \"space\"\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.handleParentKeyboardEvent);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.handleParentKeyboardEvent);\n  }\n\n  render() {\n    return this.renderControls();\n  }\n\n  handleParentKeyboardEvent = e => {\n    const { code } = e.data;\n    this.handleKeyEvent(this.keyboardCodeMap[code]);\n  };\n\n  toggleTheme = () => {\n    this.props.toggleTheme();\n  };\n\n  handleReload = () => {\n    this.props.reloadGame();\n  };\n\n  handlePlayPause = () => {\n    this.props.toggleGamePause();\n  };\n\n  handleBackward = () => {\n    this.props.stepBackwardFrame();\n  };\n\n  handleForward = () => {\n    this.props.stepForwardFrame();\n  };\n\n  handleShortcutPaneShowToggle = () => {\n    this.setState({\n      paneHidden: !this.state.paneHidden\n    });\n  };\n\n  handleKeyEvent = key => {\n    switch (key) {\n      case \"r\":\n        this.handleReload();\n        break;\n      case \"left\":\n        this.handleBackward();\n        break;\n      case \"right\":\n        this.handleForward();\n        break;\n      case \"space\":\n        this.handlePlayPause();\n        break;\n      default:\n        break;\n    }\n  };\n\n  renderControls() {\n    const { currentFrame, hideControls, paused, theme } = this.props;\n\n    return (\n      <MediaControlsWrapper hide={hideControls}>\n        <TurnCount theme={theme}>Turn: {currentFrame.turn}</TurnCount>\n        <ButtonWrapper>\n          <Button onClick={this.toggleTheme} theme={theme}>\n            Toggle Theme\n          </Button>\n          <Button\n            onClick={this.handleReload}\n            disabled={currentFrame.turn === 0 || !paused}\n            theme={theme}\n          >\n            Reload\n          </Button>\n          <Button onClick={this.handlePlayPause} theme={theme}>\n            {paused ? \"Play\" : \"Pause\"}\n          </Button>\n          <Button\n            onClick={this.handleBackward}\n            disabled={currentFrame.turn === 0 || !paused}\n            theme={theme}\n          >\n            Backward\n          </Button>\n          <Button onClick={this.handleForward} disabled={!paused} theme={theme}>\n            Forward\n          </Button>\n          <KeyboardEventHandler\n            handleKeys={Object.values(this.keyboardCodeMap)}\n            onKeyEvent={this.handleKeyEvent}\n          />\n          <KeyboardShortcutsWrapper>\n            <ShortcutsPaneTrigger onClick={this.handleShortcutPaneShowToggle}>\n              ?\n            </ShortcutsPaneTrigger>\n            {!this.state.paneHidden && (\n              <ShortcutsPane>\n                <h4>Keyboard shortcuts</h4>\n                <ul>\n                  <li>Reload = r</li>\n                  <li>Play/Pause = space</li>\n                  <li>Backward = left arrow</li>\n                  <li>Forward = right arrow</li>\n                </ul>\n              </ShortcutsPane>\n            )}\n          </KeyboardShortcutsWrapper>\n        </ButtonWrapper>\n      </MediaControlsWrapper>\n    );\n  }\n}\n\nexport default MediaControls;\n","import React from \"react\";\nimport styled from \"react-emotion\";\n\nimport { colors, themes } from \"../theme\";\n\nconst SVGWrapper = styled(\"div\")`\n  height: 100%;\n  width: 100%;\n\n  > svg {\n    object-fit: contain;\n    width: 100%;\n    height: 100%;\n    max-width: 100%;\n    max-height: 100%;\n  }\n`;\n\nconst SVGLogo = props => {\n  return (\n    <SVGWrapper>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 503 184\" {...props}>\n        <path d=\"M305.5 102.7h-36.1v-71H253v71h-36.2v-71h-27L178.2.7h146.5l-.7 31h-18.5zm-33-3h30v-71H321l.6-25h-139l9.3 25h28v71h30v-71h22.6zm226 84.5l-133.3-72.5 34.2-34.8L365.9.3l134-.1V13l-22 15.5L502.5 50h-60.8L459 87.3 439.6 107zm-128.2-73.3l117 63.7-51.8-67.8 19.8-20.1-18.5-39.8h57.4l-21.3-18.7 24-16.8V3.2l-126.3.2L403 77.6zm87-87a7.3 7.3 0 1 1 7.3-7.2 7.3 7.3 0 0 1-7.3 7.2zm0-11.5a4.2 4.2 0 1 0 4.2 4.3 4.2 4.2 0 0 0-4.2-4.3z\" />\n        <path d=\"M134.8 104l-27.2-27.6 32-76.4h34.8l43 102.7h-39.3l-5.3-13.3h-32.5zm45.4-4.4h32.5L172.3 3.1h-30.7l-30.4 72.6 22.4 22.7 4.6-12H175zM167.9 66h-22.5l11.3-30zm-18-3h13.6l-6.8-18.2zm219.6 39.7h-42.3V30.3l.7-29.6h35.3V66h28l4.7 10.7zm-39.3-3h38l24-23.8-3-6.9h-29V3.8h-29.4l-.6 26.6z\" />\n        <path d=\"M3.9 184.2L62.8 107 43.4 87.3 60.7 50H0l24.7-21.5L2.4 13V.2l59.3.1h74.7L103 77l34.2 34.8-1.8 1zm43.2-97.5l19.7 20-51.6 68 117-63.7-32.8-33.3.4-1 32-73.3H5.5v8l24 16.9L8.2 46.9h57.5zm-2-62.8a7.3 7.3 0 1 1 7.2-7.3 7.3 7.3 0 0 1-7.3 7.3zm0-11.5a4.2 4.2 0 1 0 4.1 4.2 4.2 4.2 0 0 0-4.2-4.2zM210.7 118a.2.2 0 0 1-.2 0v-.1a.2.2 0 0 1 .2.2zm4.6-45.5a49.2 49.2 0 0 0 3.5 7.6l1.4 2.6-3.3-9.7a1.1 1.1 0 0 0-1.6-.6z\" />\n        <path d=\"M223.2 94.4a1 1 0 0 0-1.2-.3l-.4-.7c-2.9-3.3-5.7-6.8-8.8-10a1 1 0 0 0-.5.8l-.5 3a2 2 0 0 0 0 .3l-1.7 11a1.1 1.1 0 0 0 .6 1.1 5.5 5.5 0 0 1-.7 1.8l.3 5v3.4a1.2 1.2 0 0 0 0 .4v.5a.7.7 0 0 0-.1.1 1.2 1.2 0 0 0 0 .4c0 .1-.1 0 0 .1v.6c0 .2 0 0 0 0a2 2 0 0 1 0 .6v1.3s-.1 0 0 0a1 1 0 0 1 0 .2v.2a.4.4 0 0 0 0 .3s-.2.1 0 .2-.1 0 0 0l-.2 1.3v1.2h.1c.1 0 0 0 0 .2a.5.5 0 0 1 0 .2.5.5 0 0 1 .2.1v.3c0 .1 0 0 0 0h.4c.2 0 0 0 0 0h.1v1a30 30 0 0 1-1.4 7.2l-.5 1.1a148.2 148.2 0 0 0-6.2-17.1l-.4-2.2c.1-.2.3-.2.5-.2a2.7 2.7 0 0 1-.4-.9 3 3 0 0 1 0-.5 1 1 0 0 0-.1-.4 2.6 2.6 0 0 0-.4-.4v-.3a.2.2 0 0 1 .2 0c.2 0 .3-.1.3-.5a12.4 12.4 0 0 0-.9-2c-.6-4.5-1.2-9-1.6-13.5a1.1 1.1 0 0 0-1.2-1l-.2-.7a1.1 1.1 0 0 0-.4-.5l-.5.4a96 96 0 0 1-11.6 12.7l-2.1 3.4a1.2 1.2 0 0 0-.1.1 1.9 1.9 0 0 1 1.3 1.4 1.1 1.1 0 0 0 .6-.5l.6-.7q-1.1 6-2.4 11.8l-2 9a45.2 45.2 0 0 0-1.5 8.7.4.4 0 0 0 .4.4 391 391 0 0 1-1 4.7.9.9 0 0 0-.4 1 11 11 0 0 0 1.9 3.8l1.4 2.5 2.2 3.4a20.3 20.3 0 0 0 2.4 2.9 7.1 7.1 0 0 0 1 .8 65.3 65.3 0 0 1 3.2 6.1 1.1 1.1 0 0 0 2-.2l4.2-23.4.3.6a.9.9 0 0 1 1.5-.2v-1.4a.8.8 0 0 1 1.7 0v.7a.7.7 0 0 1 .6.4 35 35 0 0 0 3.4 5.2.8.8 0 0 1 1.3.2c.8 1.6 1.9 3 2.7 4.6a.8.8 0 0 1-.1 1 24 24 0 0 1 3.2 3l2.3 1.9a1.3 1.3 0 0 0 1.2.2c1 1.3 1.8 2.6 2.7 4a1.1 1.1 0 0 0 2-.6c.8-6.2 1.7-12.6 1.9-18.9a7.3 7.3 0 0 1 .8-1.3c0-1.3 0-2.8.2-4.5l.5-4.5 1.6-13.3c.5-3.4 1-6.9 1.3-10.4.2-3.1-1.6-5.2-3.5-7.7zM191.7 155l-.8-1.6a1 1 0 0 0 .2-.1 1.5 1.5 0 0 1 1-.4zm.5-2.5a.4.4 0 0 0-.2-.2c-.1 0-.1-.2 0-.4h.3l-.1.5zm4.9-59v-.8l.1-.6.4 1.5a1.2 1.2 0 0 0-.5 0zm1.4 6l-.3-1v-.3c0-.1 0 0 0 0a1 1 0 0 0 .3.6l.2 1zm5.7 19.8l-.9-4.3a403.2 403.2 0 0 1 1.5 4.5.6.6 0 0 0-.6-.2zm1.2 4.4v.8l-.5-2v-1a13.3 13.3 0 0 1 .8 1.7.5.5 0 0 0-.3.5zm1.2 4.4l-.2-.2a.7.7 0 0 0 .2-.3zm-.2-2.5a14 14 0 0 1 .2 1.6 11.9 11.9 0 0 1-.2-1.5zm.3 5l-.3-1.4a3.9 3.9 0 0 0 .5.2.5.5 0 0 0 .7-.4 12 12 0 0 0 0-1.6l.4 1.4a13.1 13.1 0 0 1-1.3 1.8zm4-16.5a6.3 6.3 0 0 0 0 1.3 3 3 0 0 0 0 .7v1.1c0 .2 0 0 0 0v.1a.1.1 0 0 1 0-.1 2.3 2.3 0 0 1 0-.8v-2.1s.1 0 0 0v-.8a.2.2 0 0 0 0-.2v-.4c0-.1.1 0 0-.1v-.1a2 2 0 0 0 0-.2V109.2l.1 1.8.2 3.3h-.3zm7.9 36.6v-1.5a1.4 1.4 0 0 0 .2-.2zm2.8-53.6a.7.7 0 0 0 0-.2V96.6a1.5 1.5 0 0 0 0-.2v-.1c0-.1-.1 0 0-.1v1zm2.8 7.4l-.7 5.4v-4.6a.4.4 0 0 0 0-.1 6.3 6.3 0 0 0 0-2.4 6 6 0 0 1 .4-1.7l-.5-1v-2l.7 1.2c.8 1.5.3 3.5.1 5.2zm166.2-37.2a1 1 0 0 0-1-.7 1 1 0 0 0-.7 1.9 4 4 0 0 1-.4.2 1.1 1.1 0 0 0-.7-.3h-.3a.6.6 0 0 0-.8-.5h-.2a.6.6 0 0 0-.5-.3c-3.3.4-6.4 1.9-9.4 3.2l-2 .8a.7.7 0 0 0-1-.4 8 8 0 0 0-1.1.7.6.6 0 0 0-.6-.1 175 175 0 0 0-14 6.2l-1.5.4-4.9 1.5a23.2 23.2 0 0 0-5 1.7.8.8 0 0 0 0 1.5 107.2 107.2 0 0 1-11 4.1 1 1 0 0 0 .5 1.9l-.6.5a6.8 6.8 0 0 0-1.5 2.5l.4 1a1 1 0 0 0 0 .3c-.3 8.4 0 17 .3 25.4l-.8.2a55.5 55.5 0 0 1-9.1 1.6 52.4 52.4 0 0 1-5.5.2 1.1 1.1 0 0 0-.7-.6l-.5-.2-3.6-2.7a36.7 36.7 0 0 1-3.5-4.5v-.2a11.1 11.1 0 0 1 1-1.2l.8-1.1a4 4 0 0 0 .7-1.3 28.7 28.7 0 0 1 2.6-3.3 130.6 130.6 0 0 0 9.5-11 27 27 0 0 0 2.2-3.2 11.6 11.6 0 0 1 .2-1.8c0-.5.2-1 .3-1.4a4.2 4.2 0 0 0-1-1.7 6 6 0 0 0-1.3-.8l-1.3-.7a4.1 4.1 0 0 1-1.3-1.2 2.7 2.7 0 0 1-1.9-.7c-.5-.4-1-.9-1.7-1.3a18.3 18.3 0 0 0-1.5 1.3 8.6 8.6 0 0 1-1.7 1.2c0 .4.2.6.4.6s.3.2.4.5l-.8-.1a1.5 1.5 0 0 0-1 .2 458 458 0 0 1-8.2 9.7 29 29 0 0 0-3.5 5l-1.5 2-1.7 2.3-1 1.2V103l.2-4.6-.2-7.6a11 11 0 0 0-1.2-5.2l.3-4a1 1 0 0 0-1.6-1 1.1 1.1 0 0 0-1.9-1l-1.9 2.6q-2.1 1.5-4 3.2c-3.4-.5-3.9 2.6-3.9 5.3a1 1 0 0 0 0 1.1v1.5l.1 4.1a6.5 6.5 0 0 1-.7 2.3 53.3 53.3 0 0 1 .2 7.6l-.2 4.7-2-2.2-12.6 4.8-1 .2a3.9 3.9 0 0 0-.8.4 2.7 2.7 0 0 0-.8 0 28.6 28.6 0 0 1-1.9-3.5l-1.7-4-1.1-2.8-1.3-2.8-1-3.2-.2-.3c-.3-3.5-2.5-6.3-4.3-9.3l-.5-1.1-1.3 1.6 1 1.8-1-.2v-.2a.8.8 0 0 0-.4-.6.8.8 0 0 0 0-.1l-1 1.6a2 2 0 0 1-2.7.7l-5.3-2.6a6 6 0 0 0-.9-.3l-5 11-.5.3a18.5 18.5 0 0 0-1 3l-.2.5-1.4 3a1.1 1.1 0 0 0 .3 1.4l-.1.6a27.3 27.3 0 0 1-1 2.7 2.3 2.3 0 0 0 0 .8 2.3 2.3 0 0 0 .3.6l-.7 3-.7 2.8-.3 1.6v.1c0 .1 0 0 0 0v.4c-.2 0 0 .1-.2.2s0 .1 0 .2a1.1 1.1 0 0 1 0 .3v.5c0 .1-.2.1 0 .1 0 .2 0 .4-.2.6v.4c0 .1 0 .1 0 0a2 2 0 0 1 0 .3V124.6c.1.1 0 0 0 0v.5c0 .1-.1 0 0 .1v.8a.6.6 0 0 1-.1.2l-.1.5v.1l-.4 1.6q-1 4.2-1.6 8.8l.2 1.4-.7.9 1 .7a.4.4 0 0 1 0 .2v.1c0 .1-.1 0 0 .1v.4s-.1 0 0 0v.2a.4.4 0 0 0 0 .2v.3a1.2 1.2 0 0 1 0 .1v.2c0 .3 0 .5-.2.6h.1v2.1c0 .1 0 0 0 0v.2c0 .2 0 0 0 0v.5c0 .1 0 0 0 0v1.5a13 13 0 0 0 0 2 .1.1 0 0 1 0 .2h-.1a2.6 2.6 0 0 1 0 .7V148.9h-.1a4.6 4.6 0 0 0 0-1 2 2 0 0 0 0-.5 2.1 2.1 0 0 1 0-.3v-.4a2 2 0 0 1 0-.5v-.7a.5.5 0 0 0 0-.1v-.1.9-.2h-.2v.3a2.9 2.9 0 0 0 0 .7 1.4 1.4 0 0 1 0 .3v2.4a.1.1 0 0 1 0 .2.3.3 0 0 0 0 .1v.1a.1.1 0 0 0 .1.1.2.2 0 0 1 0 .2.1.1 0 0 1 0 .1h.1a1.3 1.3 0 0 0 0 .5h-.9v-.4a.2.2 0 0 0 0-.1v-.1a1.5 1.5 0 0 1 0-.5v-.6.3l.1.2c.1 0 0-.2 0-.2v.4a2.9 2.9 0 0 0 .1.3v.1a.7.7 0 0 1 0 .3 1 1 0 0 1 0 .3v.1l.1-.1c.1-.1 0 0 0 0v-.2a.2.2 0 0 1 0 .2c.1 0 0 .2 0 .2a3.4 3.4 0 0 0 .2.8v.1a.7.7 0 0 1 0 .4h.2c-.1 0 0-.2 0-.2v-.1l.1.1c.1 0 0 0 0 .1a3.4 3.4 0 0 1 0-.5s.2 0 0 0 .1 0 0-.2v-.3a4.5 4.5 0 0 0 .9 1.9 2.9 2.9 0 0 0 3 1.1 51.1 51.1 0 0 0 5.8 5.3c.6.5 2 .3 1.9-.8-.7-5.6.5-11.1 1.5-16.6a50.6 50.6 0 0 0 .9-7.6l.1-2.7a25.8 25.8 0 0 0 2.3 4.6c.7.9 2.3.4 2-.8a.9.9 0 0 0 0-.2 84.8 84.8 0 0 1 8.5-3.5l2.3-.7 1 3 .2.4a1.7 1.7 0 0 1 1.5.5l.1.1a131.4 131.4 0 0 1 3.1 15 .5.5 0 0 0 .9.3c1.3-1.4 1.7-3.5 2.3-5.4l2.2-4.8a9.2 9.2 0 0 0 .6-.7 10.7 10.7 0 0 0 1.6-3l.3-.6.4-.5a.4.4 0 0 0-.1-.6 12.8 12.8 0 0 0 .2-1.3l.1-.4v-.3a19.2 19.2 0 0 0 .5-2.2 1.1 1.1 0 0 0-1.4-1.3l-.8-2.3a5.3 5.3 0 0 1-.5-1l-.3-1c1.1-.8 4.8-.5 5.6-1.5a73 73 0 0 1 6.8-3.5c.1 1.2.2 8.4.4 9.5a6.3 6.3 0 0 1-.5.4c-.2.1-.2.3 0 .7l.3.3.5.6v.2a2.7 2.7 0 0 1-.7.3 1.4 1.4 0 0 0 0 1 8.7 8.7 0 0 0 .6.8 4 4 0 0 1 .3.5l.1 1.1a2.4 2.4 0 0 1-.1.2l.1.1c.3 2.5.7 5 .8 7.5l-.2 1a1.2 1.2 0 0 0 .2.9 24 24 0 0 1-.2 3.4l-.6 1c-.7 1.2 1 2.5 1.8 1.5a1.1 1.1 0 0 0 .7-.6l1.2-2-.7 1.6c-.7 1.3 1.3 2.5 2 1.2l3.6-7.3a3.5 3.5 0 0 0 .5 0 8.8 8.8 0 0 0 2.9-4 49 49 0 0 0 1.5-5l.6-2 3-6a9.8 9.8 0 0 0 2.1 1.5 49.7 49.7 0 0 0 9.7 3 11.7 11.7 0 0 0 1.2.4 2.3 2.3 0 0 0 .6 0l2.3.5a.6.6 0 0 0 .2.2 19 19 0 0 0 3.9.5 20.3 20.3 0 0 0 4.5 0l1.8-.3c1.9 0 4-.3 5.3-.5l.2 3a1.4 1.4 0 0 0-.2.4 4.3 4.3 0 0 0 .8 4.4v.1l-.1 1.3c0 1.5-.3 4.3 1 5.4a1.6 1.6 0 0 0 .1.2c.2 1.3.5 2.8 2 2.9a13.6 13.6 0 0 0 3.4-.8l4.5-1.2 5.7-1.4a57.8 57.8 0 0 0 7.2-1.4c2-.5 4-1.3 5.8-2l7.2-1.9c1.3-.3 1-2.4-.3-2.3a24.2 24.2 0 0 0-4.5 1 20.3 20.3 0 0 0 4-1.7 8.8 8.8 0 0 0 1.6-1 23.4 23.4 0 0 1 .9-5.6l.9-3a2.5 2.5 0 0 0-.6-.8 1.5 1.5 0 0 1-1.3-.2 9.5 9.5 0 0 1-1-1l-1.3-1a3 3 0 0 0-1.3-.9 16.6 16.6 0 0 1-3.8 1.5 9 9 0 0 0-3.5 1.8 25.8 25.8 0 0 0-4.2.6l-3.2.8q-1.5.5-3.3.8a6.3 6.3 0 0 1-2.5-.4v-9.4a6.2 6.2 0 0 0 1.8 0 4.4 4.4 0 0 1 2.2.1 2.3 2.3 0 0 1 1.7-.5 2.8 2.8 0 0 0 1.4-.2l.6-.1a.6.6 0 0 0 .3 0h.6a9.4 9.4 0 0 0 3.4-.8l.3-.2c.4 0 .9-.2 1.3-.4l.2-.1a1.1 1.1 0 0 0 2 .2 1 1 0 0 0 1-1l-.1-2c0-.2.2-.3.3-.4l2.1-2.4a3.9 3.9 0 0 0-.1-1.8 6.8 6.8 0 0 0-.8-1.5 2.1 2.1 0 0 1-1.4-.2c0-1.1 0-2.2.2-3.4a1 1 0 0 0-.3-.8 1.2 1.2 0 0 0-1.9-.1v.3a1 1 0 0 0-.3 0 1.2 1.2 0 0 0-1.2-.4l-2.7.7-4.2.8a30.4 30.4 0 0 1-6.2.8c-.2-.3 1.3-6.5 1.2-7v-.3c3.2-1.4 6.3-3.2 9.4-4.7q6-2.7 12.1-5l9.3-3.4a.8.8 0 0 1 .4-1.1 58.1 58.1 0 0 1 6-2.1c.4-.2 1.2-.6 2-.8l.4-1.4a9.8 9.8 0 0 1-1.2.2 6.3 6.3 0 0 1-1.4.1 1.1 1.1 0 0 1-.8-1.8.8.8 0 0 0 .3.3 1.1 1.1 0 0 0 .4.1h.1c-.2 0 0 0 0 0a.8.8 0 0 0 .5 0h.1a1.7 1.7 0 0 0 .3-.1 1.4 1.4 0 0 0 .7-1.2 1 1 0 0 0-.8-1 1 1 0 0 0-1 .6 1 1 0 0 0-.6 1 9.4 9.4 0 0 1-1.5.3c-1.2 0-1.4-1.4-.6-2a11.6 11.6 0 0 1 2-1 1.2 1.2 0 0 1 0-1.4 11 11 0 0 1-1.4.3 1.4 1.4 0 0 1-1.4-.7h.1a3.3 3.3 0 0 0 1.5.1c1 .5 2.2-.7 2-1.8a2 2 0 0 0-1.6-1.3 3.4 3.4 0 0 0-.5 0 96 96 0 0 1 3.3-1.8.9.9 0 0 0 .5-.2l1.8-1 3.7-1.8.7-.4.6-1.5-4.8 1.9zm-150 89l-1.2-1.3a1 1 0 0 0 1-.8l.1-.5a.6.6 0 0 0 .2 0v2.5zm8.5-22.5l-.5-1 .7.1h1.2a13.8 13.8 0 0 0-1.4 1zm3.5-13.3l-4.4.9a5.3 5.3 0 0 1-.8.2 5 5 0 0 0-1 .2l.6-1.7.7-1.6a39.9 39.9 0 0 1 1.6-4.5 30.8 30.8 0 0 1 2.3-4.4l.2-.9a178 178 0 0 1 5 10.6 40.5 40.5 0 0 1-4.2 1.2zm10 10.3l.3-.1a7.8 7.8 0 0 1 .2 1.3zm4.8 18.1q-.9-5.4-2.1-10.7a36.1 36.1 0 0 1 1.4 4v1.8a.5.5 0 0 0 .7.5l.7 2.5a10.1 10.1 0 0 1-.7 2zm22.6-5.8a.8.8 0 0 0-.2-.1l.2-.8a.8.8 0 0 0 .3-.1l.1.3zm14.7-17.5a1 1 0 0 1 .4.3l.6.4a7 7 0 0 1-1-.7zm34.2 16.5a4.4 4.4 0 0 1-.7-2l.6.6a6.2 6.2 0 0 1 .1 1.2zm13.7 1.9a27.8 27.8 0 0 0 3.2-.7c1.6-.4 3-.8 4.2-1.3a2.7 2.7 0 0 1 1 .1l-9.5 2.5c.3-.3.7-.5 1-.6zm6.7-64.2l-.9.2-.4.2v-.1l1.6-.5zm18-4.8a.1.1 0 0 0-.1 0l-.4.1s0 .1 0 0h-.2a.7.7 0 0 0-.1.2c0-.1-.2 0-.2 0h-.2a.7.7 0 0 0 .2-.2l.3-.1 1.4-.4zm6.1 1.7l.3-.1a.1.1 0 0 1 .1 0l-.2.2h-.1l-.2.1c-.2.1 0 0-.1 0h-.1zm1.6-6.2l-5 2.6-3.7 1.9a1 1 0 0 0 0-.7 84.8 84.8 0 0 0 10.2-4.8 1 1 0 0 0 .1.3l-1.5.7zM377.2 90zm1-.2z\" />\n        <path d=\"M184.5 76.6l-1 1.4a1 1 0 0 0-1.3-.5l-.4.2a1.1 1.1 0 0 0-.5-1 .8.8 0 0 0-.1-1 .8.8 0 0 0-.4-1 1.6 1.6 0 0 0-1-.3.8.8 0 0 0-.3-.9l2-1.2a1 1 0 0 1 0-.4 3 3 0 0 1 1-1l-3.5 2.4a1.7 1.7 0 0 0-1 .1 1.1 1.1 0 0 0-.8 0 1 1 0 0 0-.7 1l-5 3-.2.1a2 2 0 0 0-.5 0 2 2 0 0 0-1.2 1l-3.3 2.2a26.6 26.6 0 0 0-4.4 3l-1.4.7 1-.8c3.4-2.5 7.1-5 10.3-7.7.6-.6-.2-1.6-1-1.2a94.6 94.6 0 0 0-11 7.4l-10.6 8c-7 5.2-14 10.6-20.4 16.4a1 1 0 0 0-.4.7 17.3 17.3 0 0 0-4.2 3.5v.1c.7 4.8 4.2 8.4 6.4 12.7a110.5 110.5 0 0 1 14.3 3q2.3.6 4.5 1.4a12.5 12.5 0 0 1 4.3 2c2 1.8 1.7 4.7 1 7.2a43.9 43.9 0 0 1-6 5.6l-7.5 3.7-6.4 3.5a2 2 0 0 1 0 .3l-3.5 1.4a68.3 68.3 0 0 0-7.7 3.1.8.8 0 0 0 .3 1.6.8.8 0 0 0 .8 1.1 36.4 36.4 0 0 0 6.5-2.7l.4-.2c-4.9 4.3-10.5 7.7-16 11.3-2.2 1.5-4.5 3-6.7 4.7a.8.8 0 0 1 .2.2 74.2 74.2 0 0 1 11.4-6.5c.9-.4 1.8.7 1 1.3-2 1.9-4.5 3.4-6.3 5.5l.7-.2h.3l.1-.2.4-.1a38.7 38.7 0 0 1 5-2.9 1.3 1.3 0 0 1 1.6.7 2.4 2.4 0 0 0 .2-.2.6.6 0 0 0 .2 0l1.5-.7-1.9 1a.8.8 0 0 1-.3 1l-.3.1a11.7 11.7 0 0 0 1.4-.7l.6-.3c.8-.6 1.6.6 1 1.2 2.7-1.5 5.4-2.9 8.2-4.2a.9.9 0 0 0 0 .6l-.5.3a.5.5 0 0 0 .3 1 62.6 62.6 0 0 0 6.3-2l4.4-2.6.6-.4a9 9 0 0 1 2.3.1.5.5 0 0 0 .7-.5 2.7 2.7 0 0 1 0-.6c-.2.4.4 1 .8.5a9.1 9.1 0 0 1 1.3-1.2 36.4 36.4 0 0 0 6.5-3.5 17.7 17.7 0 0 0 3.2-1.9l1.9-1.4a33.8 33.8 0 0 0 2.8-2l.9-.7a13.9 13.9 0 0 0 2.2-1.7 19 19 0 0 1 2-1.5.5.5 0 0 0 .3-.6l.8-1.4a25.9 25.9 0 0 0 2.8-6.7 21.4 21.4 0 0 0 .6-7.7 10.7 10.7 0 0 0-1.2-4l-1-2.1c-.7-1.1-1.2-2.4-2-3.3a23.8 23.8 0 0 0-5.3-5 33 33 0 0 0-6.7-3.3c-2.3-.9-5.4-1.2-7.3-2.6a1.1 1.1 0 0 1-.3-.4l13.8-9c5.6-3.7 11.5-7.3 17-11.4l3.7-2a2.7 2.7 0 0 0 0-.2 1.9 1.9 0 0 1-1.3-1.6 2 2 0 0 1-.7-1.3.8.8 0 0 0 .3-.1 6.8 6.8 0 0 0 1.4-3.6 1 1 0 0 0 1.5-.3l.1-.8a1 1 0 0 0-1-1l1-2a.9.9 0 0 0-1.6-1zm-36.8 47.9a1.2 1.2 0 0 0-.2.2l-2.8-.8 1.8.3 1.4.2zm-10.2 40.4l1.3-.7a63.7 63.7 0 0 1-1.3.7zm16.3-8.6l-.3.3-.6.2.1-.1zm7.7-27a4 4 0 0 1 .1 3 11.9 11.9 0 0 0-.1-3zm4.6 19.8l-1.3 1-.6.4.4-.5 1.5-1zM147.2 160l-1.1.6h-.3l1.4-.5zm2-15.1a3 3 0 0 1 .4-.2l.3-.2h.3a2.7 2.7 0 0 0 .4-.2h.2a.6.6 0 0 1 .2-.1l-.3.2h-.1c-.2.2-.5.2-.7.3a2.8 2.8 0 0 1-.4.2l-.5.2zm13.5-16.6l-.2.9a6.5 6.5 0 0 0-1.3-1.1zm-4.8-2a9.2 9.2 0 0 1 .7 1.4 9.2 9.2 0 0 0-1-1.1 1.7 1.7 0 0 0 .3-.4zm-.9 11.2l1-1.4-.8 1.2-.2.2zm-1.6-10a13 13 0 0 1 .4 1.4 6.6 6.6 0 0 0-1.5-1.4 8.6 8.6 0 0 0 1-.1zm-2.8-4.3a5 5 0 0 1 .5.4l-1.5-.6zm24-39a1.4 1.4 0 0 1-1.4-.8h.1a1.1 1.1 0 0 0 .3-.6.9.9 0 0 0 0-.3.7.7 0 0 0 .2-.2.9.9 0 0 0 0-1 1 1 0 0 0 .7-.3 1.1 1.1 0 0 0 .2-.4l.5-.2a2.3 2.3 0 0 0-.6 1 .7.7 0 0 0 .7.9 1 1 0 0 0 .1 1 1 1 0 0 0 1.2.2 1.4 1.4 0 0 0 .3-.1l.2-.1.3-.2a1 1 0 0 0 .5.5 18.8 18.8 0 0 1-3.2.5zm4.5-4a2.4 2.4 0 0 1-.1.3v.1a1.1 1.1 0 0 0 0 .2 1 1 0 0 0-.2-.4l.5-.4a.9.9 0 0 0-.2.2zm1.3-.5a1 1 0 0 0-.3.1 1 1 0 0 0-.5 0l1-.5zm4.8-6.8l-.1-.1a1 1 0 0 0-.8-.5 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .5.8v.1a1 1 0 1 0 1.4-1.3z\" />\n      </svg>\n    </SVGWrapper>\n  );\n};\n\nconst StyledLogo = styled(SVGLogo)`\n  > path {\n    fill: ${({ color, theme }) => {\n      return !color\n        ? theme === themes.dark\n          ? colors.white\n          : colors.purple\n        : color;\n    }};\n  }\n`;\n\nexport default StyledLogo;\n","import React from \"react\";\nimport styled from \"react-emotion\";\n\nimport BlankState from \"./blank-state\";\nimport LoadingIndicator from \"./loading-indicator\";\nimport Board from \"./board\";\nimport Scoreboard from \"./scoreboard\";\nimport MediaControls from \"./mediaControls\";\nimport Logo from \"./logo\";\nimport { breakpoints, colors, themes } from \"../theme\";\n\nconst PageWrapper = styled(\"div\")`\n  position: relative;\n  height: 100%;\n  width: 100%;\n  background: ${({ theme }) =>\n    theme === themes.dark ? colors.purple : \"transparent\"};\n  background: ${({ theme }) =>\n    theme === themes.dark\n      ? `linear-gradient(30deg,hsl(280, 94%, 16%) 30%,hsl(269,99%,30%) 100%)`\n      : \"transparent\"};\n`;\n\nconst GameBoardWrapper = styled(\"div\")({\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  width: \"100%\",\n  height: \"100%\"\n});\n\nconst BoardTitle = styled(\"div\")(({ theme }) => ({\n  paddingLeft: \"2rem\",\n  paddingTop: \"1rem\",\n  fontSize: \"3.5rem\",\n  fontFamily: \"'Permanent Marker', cursive\",\n  textAlign: \"center\",\n  color: theme === themes.dark ? colors.lightText : colors.darkText,\n  letterSpacing: \".3rem\"\n}));\n\nconst HeaderWrapper = styled(\"div\")`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n  padding-right: 1rem;\n  text-align: center;\n\n  @media (min-width: ${breakpoints.xxl}) {\n    padding-top: 1rem;\n    padding-bottom: 2rem;\n  }\n`;\n\nconst LogoWrapper = styled(\"div\")`\n  width: 100%;\n  height: 5rem;\n\n  @media (min-width: ${breakpoints.lg}) {\n    height: 8rem;\n  }\n\n  @media (min-width: ${breakpoints.xxl}) {\n    height: 16rem;\n  }\n`;\n\nconst TurnCount = styled(\"div\")`\n  font-size: 1.8rem;\n  font-family: \"Permanent Marker\", cursive;\n  color: ${({ theme }) =>\n    theme === themes.dark ? colors.lightText : colors.darkText};\n\n  @media (min-width: ${breakpoints.xxl}) {\n    font-size: 3rem;\n  }\n`;\nconst TurnCountValue = styled(\"span\")`\n  display: inline-block;\n  width: 8rem;\n`;\n\nconst BoardWrapper = styled(\"div\")`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n\n  @media (min-width: ${breakpoints.md}) {\n    width: ${({ hideScoreboard }) => (hideScoreboard ? \"100%\" : \"60vw\")};\n  }\n`;\n\nconst ScoreboardWrapper = styled(\"div\")`\n  display: none;\n  width: 40vw;\n  margin-left: 2rem;\n\n  @media (min-width: ${breakpoints.md}) {\n    display: ${({ hide }) => (hide ? \"none\" : \"block\")};\n  }\n`;\n\nclass Game extends React.Component {\n  componentWillMount() {\n    const { options } = this.props;\n\n    if (options.boardTheme) {\n      this.props.toggleTheme(options.boardTheme);\n    }\n\n    if (options.game && options.engine) {\n      this.hideScoreboard = options.hideScoreboard === \"true\";\n      this.title = options.title && decodeURIComponent(options.title);\n      this.props.setGameOptions(options);\n      this.props.fetchFrames();\n    } else {\n      this.invalidArgs = true;\n    }\n  }\n\n  render() {\n    const { currentFrame } = this.props;\n\n    if (this.invalidArgs) {\n      return <BlankState />;\n    }\n\n    if (currentFrame) {\n      return this.renderGame();\n    }\n\n    return <LoadingIndicator />;\n  }\n\n  renderGame() {\n    const { currentFrame, options } = this.props;\n    return (\n      <PageWrapper theme={this.props.theme}>\n        <GameBoardWrapper>\n          <BoardWrapper hideScoreboard={this.hideScoreboard}>\n            <BoardTitle theme={this.props.theme}>{this.title}</BoardTitle>\n            <Board\n              snakes={currentFrame.snakes}\n              food={currentFrame.food}\n              columns={this.props.grid.width}\n              rows={this.props.grid.height}\n              highlightedSnake={this.props.highlightedSnake}\n              theme={this.props.theme}\n            />\n            <MediaControls\n              currentFrame={currentFrame}\n              hideControls={options.hideMediaControls === \"true\"}\n              toggleTheme={this.props.toggleTheme}\n              reloadGame={this.props.reloadGame}\n              toggleGamePause={this.props.toggleGamePause}\n              stepBackwardFrame={this.props.stepBackwardFrame}\n              stepForwardFrame={this.props.stepForwardFrame}\n              paused={this.props.paused}\n              theme={this.props.theme}\n            />\n          </BoardWrapper>\n          {!this.hideScoreboard && (\n            <ScoreboardWrapper>\n              <HeaderWrapper>\n                <LogoWrapper>\n                  <Logo theme={this.props.theme} />\n                </LogoWrapper>\n                <TurnCount theme={this.props.theme}>\n                  Turn: <TurnCountValue>{currentFrame.turn}</TurnCountValue>\n                </TurnCount>\n              </HeaderWrapper>\n              <Scoreboard\n                turn={currentFrame.turn}\n                snakes={currentFrame.snakes}\n                food={currentFrame.food}\n                highlightSnake={this.props.highlightSnake}\n                theme={this.props.theme}\n              />\n            </ScoreboardWrapper>\n          )}\n        </GameBoardWrapper>\n      </PageWrapper>\n    );\n  }\n}\n\nexport default Game;\n","import { delay, getFrameByTurn, streamAllFrames } from \"../utils/engine-client\";\nimport { themes } from \"../theme\";\n\nconst DEFAULT_FPS = 20;\n\nexport const setGameOptions = gameOptions => ({\n  type: \"SET_GAME_OPTIONS\",\n  gameOptions\n});\n\nexport const setTheme = theme => ({\n  type: \"SET_THEME\",\n  theme\n});\n\nexport const gameOver = () => ({\n  type: \"GAME_OVER\"\n});\n\nexport const requestFrames = () => ({\n  type: \"REQUEST_FRAMES\"\n});\n\nexport const receiveFrame = (game, frame) => ({\n  type: \"RECEIVE_FRAME\",\n  game,\n  frame\n});\n\nexport const setCurrentFrame = frame => ({\n  type: \"SET_CURRENT_FRAME\",\n  frame\n});\n\nexport const pauseGame = () => ({\n  type: \"PAUSE_GAME\"\n});\n\nexport const resumeGame = () => ({\n  type: \"RESUME_GAME\"\n});\n\nexport const highlightSnake = snakeId => ({\n  type: \"HIGHLIGHT_SNAKE\",\n  snakeId\n});\n\nexport const fetchFrames = () => {\n  return async (dispatch, getState) => {\n    const {\n      autoplay,\n      engine: engineUrl,\n      game: gameId,\n      turn\n    } = getState().gameOptions;\n\n    dispatch(requestFrames());\n\n    await streamAllFrames(engineUrl, gameId, (game, frame) => {\n      // Workaround for bug where turn exluded on turn 0\n      frame.Turn = frame.Turn || 0;\n      dispatch(receiveFrame(game, frame));\n\n      // Workaround to render the first frame into the board\n      if (frame.Turn === 0) {\n        const frame = getState().frames[0];\n        dispatch(setCurrentFrame(frame));\n      }\n    });\n\n    if (autoplay) {\n      const frame = getState().frames[0];\n      dispatch(resumeGame());\n      dispatch(playFromFrame(frame));\n    }\n\n    // Only navigate to the specified frame if it is within the\n    // amount of frames available in the game\n    if (turn && turn <= getState().frames.length) {\n      const frame = getState().frames[turn];\n      dispatch(setCurrentFrame(frame));\n    }\n  };\n};\n\nexport const playFromFrame = frame => {\n  return async (dispatch, getState) => {\n    const { frameRate } = getState().gameOptions;\n    const frames = getState().frames.slice(); // Don't modify in place\n    const frameIndex = frames.indexOf(frame);\n    const slicedFrames = frames.slice(frameIndex);\n\n    const ceiledFps = Math.ceil(frameRate || DEFAULT_FPS);\n    const delayMillis = 1000 / ceiledFps;\n\n    for (const frame of slicedFrames) {\n      if (getState().paused) return;\n      dispatch(setCurrentFrame(frame));\n      await delay(delayMillis);\n    }\n\n    const lastFrame = slicedFrames[slicedFrames.length - 1];\n    if (lastFrame.gameOver) {\n      if (!getState().paused) dispatch(gameOver());\n    } else {\n      dispatch(playFromFrame(lastFrame));\n    }\n  };\n};\n\nexport const reloadGame = () => {\n  return async (dispatch, getState) => {\n    const { frames, paused } = getState();\n    if (paused) {\n      const frame = getFrameByTurn(frames, 0);\n      dispatch(setCurrentFrame(frame));\n    }\n  };\n};\n\nexport const toggleGamePause = () => {\n  return async (dispatch, getState) => {\n    const { currentFrame, paused } = getState();\n\n    if (paused) {\n      dispatch(resumeGame());\n      dispatch(playFromFrame(currentFrame));\n    } else {\n      dispatch(pauseGame());\n    }\n  };\n};\n\nexport const toggleTheme = themeToSet => {\n  return async (dispatch, getState) => {\n    const { theme } = getState();\n    dispatch(\n      setTheme(themeToSet || theme === themes.dark ? themes.light : themes.dark)\n    );\n  };\n};\n\nexport const stepForwardFrame = () => {\n  return async (dispatch, getState) => {\n    const { currentFrame, frames } = getState();\n    const nextFrame = currentFrame.turn + 1;\n    const stepToFrame = getFrameByTurn(frames, nextFrame);\n    if (stepToFrame) {\n      dispatch(setCurrentFrame(stepToFrame));\n    }\n  };\n};\n\nexport const stepBackwardFrame = () => {\n  return async (dispatch, getState) => {\n    const { currentFrame, frames } = getState();\n    const prevFrame = currentFrame.turn - 1;\n    const stepToFrame = getFrameByTurn(frames, prevFrame);\n    if (stepToFrame) {\n      dispatch(setCurrentFrame(stepToFrame));\n    }\n  };\n};\n","import { connect } from \"react-redux\";\nimport { parseQueryString } from \"../utils/url\";\nimport Game from \"../components/game\";\nimport {\n  fetchFrames,\n  reloadGame,\n  toggleGamePause,\n  toggleTheme,\n  setGameOptions,\n  stepForwardFrame,\n  stepBackwardFrame,\n  highlightSnake\n} from \"../actions\";\n\nconst options = parseQueryString(window.location.search);\n\nconst mapStateToProps = state => {\n  return {\n    options: options,\n    grid: state.grid,\n    paused: state.paused,\n    currentFrame: state.currentFrame,\n    frames: state.frames,\n    highlightedSnake: state.highlightedSnake,\n    theme: state.theme\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  setGameOptions: options => dispatch(setGameOptions(options)),\n  fetchFrames: () => dispatch(fetchFrames()),\n  toggleTheme: () => dispatch(toggleTheme()),\n  reloadGame: () => dispatch(reloadGame()),\n  toggleGamePause: paused => dispatch(toggleGamePause(paused)),\n  stepForwardFrame: () => dispatch(stepForwardFrame()),\n  stepBackwardFrame: () => dispatch(stepBackwardFrame()),\n  highlightSnake: snakeId => dispatch(highlightSnake(snakeId))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Game);\n","import React from \"react\";\nimport { render } from \"react-dom\";\n// import { compose, createStore, applyMiddleware } from \"redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport rootReducer from \"./reducers\";\nimport App from \"./containers/app\";\nimport { themes } from \"./theme\";\nimport thunkMiddleware from \"redux-thunk\";\n\nconst initialState = {\n  options: null,\n  grid: [],\n  frames: [],\n  paused: true,\n  highlightedSnake: null,\n  theme: themes.light\n};\nconst middleware = applyMiddleware(thunkMiddleware);\nconst store = createStore(rootReducer, initialState, middleware);\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n// const store = createStore(\n//   rootReducer,\n//   initialState,\n//   composeEnhancers(applyMiddleware(thunkMiddleware))\n// );\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}